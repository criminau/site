<!doctype html><html lang=fr><head><meta charset=utf-8><meta name=viewport content="initial-scale=1"><title>Des commentaires avec hugo, staticman et heroku</title><meta name=robots content="index,follow"><meta name=robots content="all"><meta name=googlebot content="index,follow"><meta name=referrer content="no-referrer-when-downgrade"><meta name=msapplication-config content="browserconfig.xml"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><link rel=alternate hreflang=fr-be href=https://criminau.xyz/articles/staticman-hugo-heroku.html><link rel=alternate hreflang=fr-fr href=https://criminau.xyz/articles/staticman-hugo-heroku.html><link rel=alternate hreflang=fr-ch href=https://criminau.xyz/articles/staticman-hugo-heroku.html><meta name=description content="Bonjour !
Tutoriel pour permettre l&amp;rsquo;écriture de commentaires sur un site internet statique avec hugo cms, staticman et heroku.
"><meta name=keywords content="Commentaires,site,statique,hugo,gohugo,staticman,heroku,open-source,github,netlify"><meta name=author content="

	subversive 
	https://criminau.xyz/
"><meta itemprop=author content="subversive"><meta itemprop=headline content="Des commentaires avec hugo, staticman et heroku"><link rel=canonical href=https://criminau.xyz/articles/staticman-hugo-heroku.html><link href=https://criminau.xyz/css/globalCSS.min.63e4c9b1c664c95e65a50b03981173a55345f4c80211116ec29d022f106dae75.css rel="preload stylesheet" as=style integrity="sha256-Y+TJscZkyV5lpQsDmBFzpVNF9MgCERFuwp0CLxBtrnU="><link href=https://criminau.xyz/css/post-single.min.3782c04eccc4c8be7314bf1addd5fabc6e8cce6f41eaa6a7b710b1ba0f989a1d.css rel="preload stylesheet" as=style integrity="sha256-N4LATszEyL5zFL8a3dX6vG6Mzm9B6qantxCxug+Ymh0="><link rel=apple-touch-icon sizes=180x180 href=../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../favicon-16x16.png><link rel=manifest type=application/manifest+json href=../site.webmanifest><meta name=generator content="Hugo 0.110.0"><link rel=alternate type=application/rss+xml href=https://criminau.xyz/index.xml title=criminau.xyz><meta property="og:title" content="Des commentaires avec hugo, staticman et heroku"><meta property="og:description" content="Bonjour !
Tutoriel pour permettre l&amp;rsquo;écriture de commentaires sur un site internet statique avec hugo cms, staticman et heroku.
"><meta property="og:type" content="article"><meta property="og:url" content="https://criminau.xyz/articles/staticman-hugo-heroku.html"><meta name=twitter:image content><meta property="og:image" content><meta property="article:published_time" content="2021-02-05T17:00:00+00:00"><meta property="article:modified_time" content="2021-02-05T17:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://criminau.xyz/android-chrome-192x192.png"><meta name=twitter:title content="Des commentaires avec hugo, staticman et heroku"><meta name=twitter:description content="Bonjour !
Tutoriel pour permettre l&amp;rsquo;écriture de commentaires sur un site internet statique avec hugo cms, staticman et heroku.
"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Des commentaires avec hugo, staticman et heroku","name":"Des commentaires avec hugo, staticman et heroku","abstract":"Bonjour !\nTutoriel pour permettre l\u0026amp;rsquo;écriture de commentaires sur un site internet statique avec hugo cms, staticman et heroku.\n","keywords":["Commentaires, site, statique, hugo, gohugo, staticman, heroku, open-source, github, netlify"],"articleBody":"Bonjour !\nTutoriel pour permettre l’écriture de commentaires sur un site internet statique avec hugo cms, staticman et heroku.\nObjectif, offrir a vos visiteurs la possibilité d’écrire des commentaires (ou autres) sans passer par un organisme tel que Graphcomment ou Disqus,… Ainsi vous respectez la vie privée de vos utilisateurs.\nTous les tutos disponibles sur le net (que j’ai lu) sont en anglais, ils datent et certains liens ne fonctionnent plus, bref j’ai du faire un mix de tuto pour y arriver, du coup je vous propose un tuto en français.\nN’oubliez jamais que ce qui fonctionne est sur les codes sources des sites. En ce sens si vous copiez-collez et qu’il y a une erreur, cherchez la mise à jour dans le code source sur github des sites qui tournent avec.\nEdité le 28/08/21, article modifié cf :\nCompte githubBOT Protection contre le spam Requis Votre compte github principal. Un compte github vérifié qui sera votre bot (ex: githubbot). Conservez les identifiants et mots de passe. Un compte vérifié heroku. Conservez les identifiants et mot de passe. Heroku CLI. J’utilise heroku pour ubuntu 20.04, les commandes sont un petit peu différentes mais la procédure reste la même.\nConsidérant que vous souhaitez installer staticman sur votre site, vous avez donc la capacité de gérer correctement votre site sous hugo (ou autre), de traduire les .toml en .yml et vice versa.\nBien il vous faudra de la patience pour ne manquer aucune étape.\nCommençons !\nCompte githubBOT Vous n’avez plus besoin d’un compte githubBOT, faites de même pour utiliser votre compte.\nConnectez vous à votre compte GithubBOT, allez dans paramètres du compte (settings du compte) -\u003e Developer settings -\u003e Personal access tokens -\u003e Generate new token.\nNommez le, sélectionnez (select scopes) : repo (tous) + user (tous) =\u003e Generate token. SAUVEGARDEZ bien votre token sur un fichier txt.\nApplication Heroku Télécharger staticman via github avec le lien https :\ngit clone https://github.com/eduardoboucas/staticman.git Allez dans le dossier staticman.\nCréez un fichier, nommez-le Procfile, insérez-y npm start.\nCréez une clé RSA :\nopenssl genrsa -out key.pem Créez un fichier, nommez-le config.production.json, insérez-y :\nnotes : votretoken ressemble a celui ci : b81f780f9f5f3be15a5595e618379756344cdsdk2 pour la rsaPrivateKey, collez l’intégralité du fichier key.pem\n{ \"githubToken\": \"votretoken\", \"rsaPrivateKey\": \"-----BEGIN RSA PRIVATE KEY\\n-----la clé entière-----\\nEND RSA PRIVATE KEY-----\", \"port\": 8080 } (toujours dans le dossier staticman)\nConnectez votre compte heroku avec :\nheroku login Toujours dans le dossier cloné plus haut (staticman), créez une application heroku :\nheroku create nomdevotreapplication Configuration (votretoken ressemble a celui ci : b81f780f9f5f3be15a5595e618379756344cdsdk2)\nheroku config:set NODE_ENV=\"production\" heroku config:set GITHUB_TOKEN=\"votretoken\" heroku config:set RSA_PRIVATE_KEY=\"$(cat ./key.pem)\" Créez une branche de production :\ngit checkout -b production 55d1430 Ajoutez dans le fichier .gitignore pour ignorer le fichier configuration:\n!config.production.json\nDéploiement git add . git commit -m \"Set up Staticman v3 for deployment to Heroku\" git push heroku production:master Si tout c’est bien passé, en se rendant sur https://nomdevotreapplication.herokuapp.com/ vous devez lire :\nHello from Staticman version 3.0.0!\nVotre app est disponible.\nAPI sur github Connectons votre githubBOT avec votre compteGITHUBprincipal.\nPour cela, depuis le dépôt de votre site, allez dans “settings” (paramètres de ce dépôt) -\u003e Manage Access -\u003e Invite a colaborator -\u003e yourgithubBOT -\u003e Invite.\nAcceptez l’invitation via le mail de votre githubBOT.\nAPI ponts et config Depuis le fichier staticman.yml, j’ai choisi volontairement de désactiver la modération, mais faites à votre guise.\nmoderation: true Cela va créer une “pull request” sur votre branche sélectionnée dans staticman.yml.\nA la source (la RACINE) de votre site, créez un fichier staticman.yml , insérez-y :\ncomments: allowedFields: [\"name\", \"comment\"] branch: \"master\" commitMessage: \"Nouveau commentaire\" filename: \"comment-{@timestamp}\" format: \"yaml\" generatedFields: date: type: date options: format: \"iso8601\" moderation: false name: \"Staticman\" path: \"data/comments/{options.slug}\" requiredFields: [\"name\", \"comment\"] transforms: email: md5 Dans votre fichier config.yml, ajoutez ou complétez :\nparams: comments: true staticman: api: 'https://nomdevotreapp.herokuapp.com/v2/entry/githubprincipal/repositorydusite/master/comments' Ajoutez également un dossier /data/comments/.gitkeep.\n(Cela permet de maintenir le git push avec les dossiers. Essayez sans, les dossiers vides ne suivront pas sur github).\nLa variable “comments” vous permet de désactiver les commentaires depuis le fichier single.html, vous pouvez aussi l’utiliser dans les params d’un article (ou page : comments: false).\nAfficher et écrire des commentaires depuis le site default Dans layout/_default/single.html insérez :\n{{- if and ($.Site.Params.comments) (ne .Params.comments false) }} {{- partial \"comments.html\" . }} {{- end }} html Dans layouts/partials/comments.html (créez le fichier si besoin “comments.html”) insérez-y :\nMerci pour le commentaire !\u0026nbsp;","wordCount":"2828","inLanguage":"fr","image":"https://criminau.xyz/android-chrome-192x192.png","datePublished":"2021-02-05","dateModified":"2021-02-05","author":{"@type":"Person","name":"subversive","url":"https://criminau.xyz/"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://criminau.xyz/articles/staticman-hugo-heroku.html"},"publisher":{"@type":"Organization","name":"Journal Subversif","logo":{"@type":"ImageObject","url":"https://criminau.xyz/favicon.ico"}}}</script></head><body class=single><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><nav class=nav><ul><li><a title="Page d'accueil" href=https://criminau.xyz/><img class=logo title="Logo du Journal Subversif" src=https://criminau.xyz/apple-touch-icon.png alt="Logo du Journal Subversif" aria-label="Logo du Journal Subversif"></a></li><li class=theme-toggle><p title="Changer le thème" id=theme-toggle title="Changer le thème"><svg id="moon" [role="img" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" [role="img" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></p></li><li><form id=search-form class=search-form method=get data-language-prefix><input id=search-input class=search-display name=q tabindex=0 autocomplete=off placeholder=recherche><ul role=list id=search-results class=search-results></ul></form></li><li><a title=Archives href=https://criminau.xyz/archives/><span>Archives</span></a></li><li><a title="A propos" href=https://criminau.xyz/apropos/><span>A propos</span></a></li></ul></nav><article itemscope itemtype=https://schema.org/Article class=post-single><header class=post-header><h1 itemprop="name headline" class=post-title>Des commentaires avec hugo, staticman et heroku</h1><div class=post-meta>5 Février 2021 &nbsp;·&nbsp;
14 min&nbsp;·&nbsp;<p class=post-meta-author itemprop=author itemscope itemtype=http://schema.org/Person><span itemprop=name>subversive</span>
<span itemprop=url id=no-display>https://criminau.xyz/</span></p>&nbsp;·&nbsp;<a class=pdf-link-post-single href=../pdf/staticman-hugo-heroku.pdf target=_blank rel="noopener noreferrer" title="Télécharger staticman-hugo-heroku en version pdf" download>pdf</a></div></header><div class=toc><details><summary><p title="Table des matières" class=details>Table des matières</p></summary><blockquote><ul><li><a href=#requis>Requis</a></li><li><a href=#compte-githubbot>Compte githubBOT</a></li><li><a href=#application-heroku>Application Heroku</a><ul><li><a href=#configuration>Configuration</a></li><li><a href=#d%c3%a9ploiement>Déploiement</a></li></ul></li><li><a href=#api-sur-github>API sur github</a></li><li><a href=#api-ponts-et-config>API ponts et config</a></li><li><a href=#afficher-et-%c3%a9crire-des-commentaires-depuis-le-site>Afficher et écrire des commentaires depuis le site</a><ul><li><a href=#default>default</a></li><li><a href=#html>html</a></li><li><a href=#javascript>javascript</a></li><li><a href=#css>css</a></li></ul></li><li><a href=#protection-contre-le-spam>Protection contre le spam</a><ul><li><a href=#autre-solution>autre solution</a></li></ul></li><li><a href=#notes-importantes>Notes importantes</a></li><li><a href=#astuce>Astuce</a><ul><li><a href=#probl%c3%a8mes-rencontr%c3%a9s>Problèmes rencontrés</a></li></ul></li><li><a href=#sources>Sources</a><ul><li><a href=#tutos>tutos</a></li><li><a href=#fichiers>fichiers</a></li></ul></li></ul></blockquote></details></div><div itemprop=articleBody class="post-content justify"><p>Bonjour !</p><p>Tutoriel pour permettre l&rsquo;écriture de commentaires sur un site internet statique avec <a href=https://gohugo.io/>hugo cms</a>, <a href=https://staticman.net/docs/>staticman</a> et <a href=https://www.heroku.com/>heroku</a>.</p><p>Objectif, offrir a vos visiteurs la possibilité d&rsquo;écrire des commentaires (ou autres) sans passer par un organisme tel que Graphcomment ou Disqus,&mldr; Ainsi vous respectez la vie privée de vos utilisateurs.</p><p>Tous les tutos disponibles sur le net (que j&rsquo;ai lu) sont en anglais, ils datent et certains liens ne fonctionnent plus, bref j&rsquo;ai du faire un mix de tuto pour y arriver, du coup je vous propose un tuto en français.</p><p>N&rsquo;oubliez jamais que ce qui fonctionne est sur les codes sources des sites. En ce sens si vous copiez-collez et qu&rsquo;il y a une erreur, cherchez la mise à jour dans le code source sur github des sites qui tournent avec.</p><p><kbd>Edité le 28/08/21, article modifié cf :</p><ul><li><a href=https://criminau.xyz/articles/staticman-hugo-heroku.html#compte-githubbot>Compte githubBOT</a></li><li><a href=https://criminau.xyz/articles/staticman-hugo-heroku.html#protection-contre-le-spam>Protection contre le spam</a></kbd></li></ul><h2 id=requis>Requis</h2><ul><li>Votre compte github principal.</li><li>Un compte github vérifié qui sera votre bot (ex: githubbot). Conservez les identifiants et mots de passe.</li><li>Un compte vérifié <a href=https://heroku.com>heroku</a>. Conservez les identifiants et mot de passe.</li><li>Heroku CLI.</li></ul><p>J&rsquo;utilise <a href=https://snapcraft.io/install/heroku/ubuntu>heroku pour ubuntu 20.04</a>, les commandes sont un petit peu différentes mais la procédure reste la même.</p><p>Considérant que vous souhaitez installer staticman sur votre site, vous avez donc la capacité de gérer correctement votre site sous hugo (ou autre), de traduire les .toml en .yml et vice versa.</p><p>Bien il vous faudra de la patience pour ne manquer aucune étape.</p><p>Commençons !</p><h2 id=compte-githubbot>Compte githubBOT</h2><p><em><strong>Vous n&rsquo;avez plus besoin d&rsquo;un compte githubBOT, faites de même pour utiliser votre compte.</strong></em></p><p>Connectez vous à votre compte GithubBOT, allez dans paramètres du compte (settings du compte) -> Developer settings -> Personal access tokens -> Generate new token.</p><p>Nommez le, sélectionnez (select scopes) : repo (tous) + user (tous) => Generate token. SAUVEGARDEZ bien votre token sur un fichier txt.</p><h2 id=application-heroku>Application Heroku</h2><p><a href=https://github.com/eduardoboucas/staticman>Télécharger staticman via github</a> avec le lien https :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-angular2 data-lang=angular2><span style=display:flex><span>git clone https://github.com/eduardoboucas/staticman.git
</span></span></code></pre></div><p>Allez dans le dossier staticman.<br>Créez un fichier, nommez-le <code>Procfile</code>, insérez-y <code>npm start</code>.</p><p>Créez une clé RSA :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-angular2 data-lang=angular2><span style=display:flex><span>openssl genrsa -out key.pem
</span></span></code></pre></div><p>Créez un fichier, nommez-le <code>config.production.json</code>, insérez-y :</p><ul><li>notes :</li></ul><blockquote><p>votretoken ressemble a celui ci : b81f780f9f5f3be15a5595e618379756344cdsdk2
pour la rsaPrivateKey, collez l&rsquo;intégralité du fichier key.pem</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-angular2 data-lang=angular2><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>  &#34;githubToken&#34;: &#34;votretoken&#34;,
</span></span><span style=display:flex><span>  &#34;rsaPrivateKey&#34;: &#34;-----BEGIN RSA PRIVATE KEY\n-----la clé entière-----\nEND RSA PRIVATE KEY-----&#34;,
</span></span><span style=display:flex><span>  &#34;port&#34;: 8080
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>(toujours dans le dossier staticman)</p><p>Connectez votre compte heroku avec :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-angular2 data-lang=angular2><span style=display:flex><span>heroku login
</span></span></code></pre></div><p>Toujours dans le dossier cloné plus haut (staticman), créez une application heroku :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-angular2 data-lang=angular2><span style=display:flex><span>heroku create nomdevotreapplication
</span></span></code></pre></div><h3 id=configuration>Configuration</h3><p>(votretoken ressemble a celui ci : b81f780f9f5f3be15a5595e618379756344cdsdk2)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-angular2 data-lang=angular2><span style=display:flex><span>heroku config:set NODE_ENV=&#34;production&#34;
</span></span><span style=display:flex><span>heroku config:set GITHUB_TOKEN=&#34;votretoken&#34;
</span></span><span style=display:flex><span>heroku config:set RSA_PRIVATE_KEY=&#34;$<span style=color:#960050;background-color:#1e0010>(</span>cat ./key.pem)&#34;
</span></span></code></pre></div><p>Créez une branche de production :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-angular2 data-lang=angular2><span style=display:flex><span>git checkout -b production 55d1430
</span></span></code></pre></div><p>Ajoutez dans le fichier .gitignore pour ignorer le fichier configuration:<br><code>!config.production.json</code></p><h3 id=déploiement>Déploiement</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-angular2 data-lang=angular2><span style=display:flex><span>git add .
</span></span><span style=display:flex><span>git commit -m &#34;Set up Staticman v3 for deployment to Heroku&#34;
</span></span><span style=display:flex><span>git push heroku production:master
</span></span></code></pre></div><p>Si tout c&rsquo;est bien passé, en se rendant sur <a href=https://nomdevotreapplication.herokuapp.com/>https://nomdevotreapplication.herokuapp.com/</a> vous devez lire :</p><p>Hello from Staticman version 3.0.0!</p><p>Votre app est disponible.</p><h2 id=api-sur-github>API sur github</h2><p>Connectons votre githubBOT avec votre compteGITHUBprincipal.</p><p>Pour cela, depuis le dépôt de votre site, allez dans &ldquo;settings&rdquo; (paramètres de ce dépôt) -> Manage Access -> Invite a colaborator -> yourgithubBOT -> Invite.</p><p>Acceptez l&rsquo;invitation via le mail de votre githubBOT.</p><h2 id=api-ponts-et-config>API ponts et config</h2><p>Depuis le fichier staticman.yml, j&rsquo;ai choisi volontairement de désactiver la modération, mais faites à votre guise.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>moderation</span>: <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><p>Cela va créer une &ldquo;pull request&rdquo; sur votre branche sélectionnée dans staticman.yml.</p><p>A la source (la RACINE) de votre site, créez un fichier <code>staticman.yml</code> , insérez-y :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>comments</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>allowedFields</span>: [<span style=color:#e6db74>&#34;name&#34;</span>, <span style=color:#e6db74>&#34;comment&#34;</span>]
</span></span><span style=display:flex><span>  <span style=color:#f92672>branch</span>: <span style=color:#e6db74>&#34;master&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>commitMessage</span>: <span style=color:#e6db74>&#34;Nouveau commentaire&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>filename</span>: <span style=color:#e6db74>&#34;comment-{@timestamp}&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>format</span>: <span style=color:#e6db74>&#34;yaml&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>generatedFields</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>date</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>type</span>: <span style=color:#ae81ff>date</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>options</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>format</span>: <span style=color:#e6db74>&#34;iso8601&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>moderation</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;Staticman&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>path</span>: <span style=color:#e6db74>&#34;data/comments/{options.slug}&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>requiredFields</span>: [<span style=color:#e6db74>&#34;name&#34;</span>, <span style=color:#e6db74>&#34;comment&#34;</span>]
</span></span><span style=display:flex><span>  <span style=color:#f92672>transforms</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>email</span>: <span style=color:#ae81ff>md5</span>
</span></span></code></pre></div><p>Dans votre fichier config.yml, ajoutez ou complétez :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>params</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>comments</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>staticman</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>api</span>: <span style=color:#e6db74>&#39;https://nomdevotreapp.herokuapp.com/v2/entry/githubprincipal/repositorydusite/master/comments&#39;</span>
</span></span></code></pre></div><p>Ajoutez également un dossier <code>/data/comments/.gitkeep</code>.<br>(Cela permet de maintenir le git push avec les dossiers. Essayez sans, les dossiers vides ne suivront pas sur github).</p><p>La variable &ldquo;comments&rdquo; vous permet de désactiver les commentaires depuis le fichier <code>single.html</code>, vous pouvez aussi l&rsquo;utiliser dans les params d&rsquo;un article (ou page : comments: false).</p><h2 id=afficher-et-écrire-des-commentaires-depuis-le-site>Afficher et écrire des commentaires depuis le site</h2><h3 id=default>default</h3><p>Dans <code>layout/_default/single.html</code> insérez :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-angular2 data-lang=angular2><span style=display:flex><span><span style=color:#75715e>{{</span><span style=color:#960050;background-color:#1e0010>-</span> if and <span style=color:#960050;background-color:#1e0010>($</span>.Site.Params.comments<span style=color:#960050;background-color:#1e0010>)</span> <span style=color:#960050;background-color:#1e0010>(</span>ne .Params.comments <span style=color:#e6db74>false</span><span style=color:#960050;background-color:#1e0010>)</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span><span style=color:#960050;background-color:#1e0010>-</span> partial <span style=color:#e6db74>&#34;comments.html&#34;</span> <span style=color:#960050;background-color:#1e0010>.</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span><span style=color:#960050;background-color:#1e0010>-</span> end <span style=color:#75715e>}}</span>
</span></span></code></pre></div><h3 id=html>html</h3><p>Dans <code>layouts/partials/comments.html</code> (créez le fichier si besoin &ldquo;comments.html&rdquo;) insérez-y :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-angular2 data-lang=angular2><span style=display:flex><span>&lt;!-- On demande s&#39;il ya bien l&#39;API dans config.yml (<span style=color:#a6e22e>s2</span>) --&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;!-- Si le commentaire est BIEN parti, on remercie l&#39;utilisateur. --&gt;
</span></span><span style=display:flex><span>&lt;aside aria-label=&#34;note&#34; class=&#34;note&#34;&gt;
</span></span><span style=display:flex><span>&lt;section id=&#34;comment-thankyou&#34; style=&#34;display: none;&#34;&gt;
</span></span><span style=display:flex><span>  &lt;p class=&#34;comment-merci&#34;&gt;Merci pour le commentaire !&amp;nbsp;&lt;a rel=&#34;noopener noreferrer&#34; title=&#34;Rafraîchir la page ?&#34; href=&#34;<span style=color:#75715e>{{</span> .Permalink <span style=color:#75715e>}}</span>&#34;&gt;Rafraîchir la page ?&lt;/a&gt;&lt;/p&gt;
</span></span><span style=display:flex><span>&lt;/section&gt;
</span></span><span style=display:flex><span>&lt;/aside&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> with .Site.Params.staticman.api <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>&lt;!-- L&#39;API est présent, on peut continuer --&gt;
</span></span><span style=display:flex><span>&lt;div class=&#34;classe-commentaire&#34;&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;!-- Bouton pour ouvrir l&#39;espace commentaire (<span style=color:#a6e22e>Anti-Spam1</span>)--&gt;
</span></span><span style=display:flex><span>&lt;button aria-label=&#34;Ouvrir espace commentaire&#34; title=&#34;Ouvrir espace commentaire&#34; id=&#34;staticman-button&#34; onclick=&#34;showComments<span style=color:#960050;background-color:#1e0010>(</span>)&#34;&gt;Espace commentaire&lt;/button&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;!-- Section qui permet l&#39;affichage et la lecture des commenaites --&gt;
</span></span><span style=display:flex><span>&lt;section id=&#34;staticman-comments&#34; class=&#34;js-comments staticman-comments&#34;&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;!-- Récupération des commentaires par fichier dans /data/comments/ --&gt;
</span></span><span style=display:flex><span>  <span style=color:#75715e>{{</span> <span style=color:#960050;background-color:#1e0010>$</span>slug <span style=color:#960050;background-color:#1e0010>:=</span> replace <span style=color:#960050;background-color:#1e0010>$</span>.File.Path <span style=color:#e6db74>&#34;/&#34;</span> <span style=color:#e6db74>&#34;-&#34;</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>{{</span> if <span style=color:#960050;background-color:#1e0010>$</span>.Site.Data.comments <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> <span style=color:#960050;background-color:#1e0010>$</span>comments <span style=color:#960050;background-color:#1e0010>:=</span> index <span style=color:#960050;background-color:#1e0010>$</span>.Site.Data.comments <span style=color:#960050;background-color:#1e0010>$</span>slug <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>&lt;!-- Affichage du nombre de commentaires
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> if <span style=color:#960050;background-color:#1e0010>$</span>comments <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>{{</span> if gt <span style=color:#960050;background-color:#1e0010>(</span>len <span style=color:#960050;background-color:#1e0010>$</span>comments<span style=color:#960050;background-color:#1e0010>)</span> <span style=color:#ae81ff>1</span>  <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>        &lt;h3&gt;<span style=color:#75715e>{{</span> len <span style=color:#960050;background-color:#1e0010>$</span>comments  <span style=color:#75715e>}}</span> commentaires&lt;/h3&gt;
</span></span><span style=display:flex><span>      <span style=color:#75715e>{{</span> else <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>        &lt;h3&gt;<span style=color:#75715e>{{</span> len <span style=color:#960050;background-color:#1e0010>$</span>comments  <span style=color:#75715e>}}</span> aucun commentaire&lt;/h3&gt;
</span></span><span style=display:flex><span>      <span style=color:#75715e>{{</span> end <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> else <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>      &lt;h3&gt;No comments&lt;/h3&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> end <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>Fin de l&#39;affichage du nombre de commentaires --&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;!-- Affichage d&#39;un commentaire --&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> <span style=color:#960050;background-color:#1e0010>$</span>.Scratch.Set <span style=color:#e6db74>&#34;hasComments&#34;</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> range <span style=color:#960050;background-color:#1e0010>$</span>index<span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#960050;background-color:#1e0010>$</span>comments <span style=color:#960050;background-color:#1e0010>:=</span> <span style=color:#960050;background-color:#1e0010>(</span>index <span style=color:#960050;background-color:#1e0010>$</span>.Site.Data.comments <span style=color:#960050;background-color:#1e0010>$</span>slug <span style=color:#960050;background-color:#1e0010>)</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>{{</span> if not .parent <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>{{</span> <span style=color:#960050;background-color:#1e0010>$</span>.Scratch.Add <span style=color:#e6db74>&#34;hasComments&#34;</span> <span style=color:#ae81ff>1</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>        &lt;article id=&#34;comment-<span style=color:#75715e>{{</span> <span style=color:#960050;background-color:#1e0010>$</span>.Scratch.Get <span style=color:#e6db74>&#34;hasComments&#34;</span> <span style=color:#75715e>}}</span>&#34; class=&#34;static-comment&#34;&gt;
</span></span><span style=display:flex><span>          &lt;div class=&#34;comment-author&#34;&gt;
</span></span><span style=display:flex><span>              &lt;strong&gt;<span style=color:#75715e>{{</span> .name <span style=color:#75715e>}}</span>&lt;/strong&gt;
</span></span><span style=display:flex><span>          &lt;/div&gt;
</span></span><span style=display:flex><span>          &lt;div class=&#34;comment-timestamp&#34;&gt;
</span></span><span style=display:flex><span>              &lt;a href=&#34;#<span style=color:#a6e22e>comment-</span><span style=color:#75715e>{{</span> <span style=color:#960050;background-color:#1e0010>$</span>.Scratch.Get <span style=color:#e6db74>&#34;hasComments&#34;</span> <span style=color:#75715e>}}</span>&#34; title=&#34;Lien vers ce commentaire&#34;&gt;
</span></span><span style=display:flex><span>                  &lt;time datetime=&#34;<span style=color:#75715e>{{</span> .date <span style=color:#75715e>}}</span>&#34;&gt;<span style=color:#75715e>{{</span> dateFormat <span style=color:#e6db74>&#34;2 Jan 2006 15:04 MST&#34;</span> .date<span style=color:#75715e>}}</span>&lt;/time&gt;
</span></span><span style=display:flex><span>              &lt;/a&gt;
</span></span><span style=display:flex><span>          &lt;/div&gt;
</span></span><span style=display:flex><span>          &lt;div class=&#34;comment-content&#34;&gt;&lt;p&gt;<span style=color:#75715e>{{</span> .comment | markdownify <span style=color:#75715e>}}</span>&lt;/p&gt;&lt;/div&gt;
</span></span><span style=display:flex><span>        &lt;/article&gt;
</span></span><span style=display:flex><span>      <span style=color:#75715e>{{</span> end <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> end <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>{{</span> end <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;!-- Formulaire pour écrire un commentaire --&gt;
</span></span><span style=display:flex><span>&lt;form class=&#34;js-form form&#34; id=&#34;commentsform&#34; method=&#34;post&#34; action=&#34;<span style=color:#75715e>{{</span> <span style=color:#960050;background-color:#1e0010>$</span>.Site.Params.staticman.api <span style=color:#75715e>}}</span>&#34;&gt;
</span></span><span style=display:flex><span>&lt;fieldset&gt;
</span></span><span style=display:flex><span>    &lt;input type=&#34;hidden&#34; name=&#34;options[<span style=color:#a6e22e>redirect</span>]&#34; value=&#34;<span style=color:#75715e>{{</span> <span style=color:#960050;background-color:#1e0010>$</span>.RelPermalink | absURL <span style=color:#75715e>}}</span>#<span style=color:#a6e22e>comment-thankyou</span>&#34;&gt;
</span></span><span style=display:flex><span>    &lt;input type=&#34;hidden&#34; name=&#34;options[<span style=color:#a6e22e>slug</span>]&#34; value=&#34;<span style=color:#75715e>{{</span> replace <span style=color:#960050;background-color:#1e0010>$</span>.File.Path <span style=color:#e6db74>&#34;/&#34;</span> <span style=color:#e6db74>&#34;-&#34;</span> <span style=color:#75715e>}}</span>&#34;&gt;
</span></span><span style=display:flex><span>    &lt;input type=&#34;hidden&#34; name=&#34;options[<span style=color:#a6e22e>parent</span>]&#34; value=&#34;&#34;&gt;
</span></span><span style=display:flex><span>    &lt;label aria-label=&#34;Pseudonyme&#34; for=&#34;yourname&#34;&gt;Pseudonyme:&lt;/label&gt;
</span></span><span style=display:flex><span>    &lt;input name=&#34;fields[<span style=color:#a6e22e>name</span>]&#34; id=&#34;yourname&#34; type=&#34;text&#34; placeholder=&#34;Votre pseudonyme&#34; required/&gt;
</span></span><span style=display:flex><span>    &lt;label aria-label=&#34;Commentaire&#34; for=&#34;yourcomment&#34;&gt;Commentaire:&lt;/label&gt;
</span></span><span style=display:flex><span>    &lt;textarea name=&#34;fields[<span style=color:#a6e22e>comment</span>]&#34; id=&#34;yourcomment&#34; placeholder=&#34;A quoi pensez vous ?&#34; required&gt;&lt;/textarea&gt;
</span></span><span style=display:flex><span>    &lt;output id=&#34;warningComment&#34;&gt;En cliquant sur Envoyer vous acceptez la &lt;a target=&#34;_blank&#34; rel=&#34;noopener noreferrer&#34; title=&#34;Charte de publication&#34; class=&#34;&#34; href=&#34;https://mondomaine.fr/chartedepublication.txt&#34;&gt;Charte de publication&lt;/a&gt;&lt;/output&gt;
</span></span><span style=display:flex><span>    &lt;!-- Anti-Spam2 --&gt;
</span></span><span style=display:flex><span>    &lt;input type=&#34;hidden&#34; id=&#34;youarenotarobot1&#34;&gt;
</span></span><span style=display:flex><span>    &lt;!-- Anti-Spam3 --&gt;
</span></span><span style=display:flex><span>    &lt;input aria-label=&#34;Résultat du Captcha&#34; name=&#34;myCaptcha&#34; class=&#34;jCaptcha&#34; type=&#34;text&#34; placeholder=&#34;Tapez le résultat s’il vous plaît&#34;&gt;
</span></span><span style=display:flex><span>    &lt;button aria-label=&#34;Envoyer le commentaire&#34; type=&#34;submit&#34; title=&#34;Envoyer le commentaire&#34; class=&#34;button&#34; id=&#34;submitButton&#34;&gt;Envoyer&lt;/button&gt;
</span></span><span style=display:flex><span>&lt;/fieldset&gt;
</span></span><span style=display:flex><span>&lt;/form&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/section&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;!-- Fin class-commentaire --&gt;
</span></span><span style=display:flex><span>&lt;/div&gt;
</span></span><span style=display:flex><span>&lt;!-- Fin sécurité --&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> end <span style=color:#75715e>}}</span>
</span></span></code></pre></div><h3 id=javascript>javascript</h3><p>Le javascript est nécessaire dans cette config, à vous de le personnaliser en fonction de vos désirs.</p><p>Pour des soucis de performance, le script se trouve dans un autre fichier js. le voici :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-angular2 data-lang=angular2><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> Saticman + Anti-Spam
</span></span><span style=display:flex><span>-----------------------------------------------------------------------------------<span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// Permet d&#39;afficher l&#39;espace commentaire.
</span></span><span style=display:flex><span>function showComments<span style=color:#960050;background-color:#1e0010>(</span>) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>// Remove button
</span></span><span style=display:flex><span>var staticmanButton = document.getElementById<span style=color:#960050;background-color:#1e0010>(</span>&#39;staticman-button&#39;);
</span></span><span style=display:flex><span>staticmanButton.parentNode.removeChild(<span style=color:#a6e22e>staticmanButton</span>);
</span></span><span style=display:flex><span>// Un-hide comments
</span></span><span style=display:flex><span>var staticmanComments = document.getElementById<span style=color:#960050;background-color:#1e0010>(</span>&#39;staticman-comments&#39;);
</span></span><span style=display:flex><span>staticmanComments.style.display = &#39;block&#39;;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// Permet de calculer le captcha.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>(</span>function <span style=color:#960050;background-color:#1e0010>(</span>root, factory) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>if <span style=color:#960050;background-color:#1e0010>(</span>root === undefined &amp;&amp; window !== undefined) root = window;
</span></span><span style=display:flex><span>if <span style=color:#960050;background-color:#1e0010>(</span>typeof define === &#39;function&#39; &amp;&amp; define.amd) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>// AMD. Register as an anonymous module unless amdModuleId is set
</span></span><span style=display:flex><span>define<span style=color:#960050;background-color:#1e0010>([</span>], function <span style=color:#960050;background-color:#1e0010>(</span>) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>  return <span style=color:#960050;background-color:#1e0010>(</span>root<span style=color:#960050;background-color:#1e0010>[</span>&#39;jCaptcha&#39;] = factory<span style=color:#960050;background-color:#1e0010>(</span>));
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>} else if <span style=color:#960050;background-color:#1e0010>(</span>typeof module === &#39;object&#39; &amp;&amp; module.exports) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>// Node. Does not work with strict CommonJS, but
</span></span><span style=display:flex><span>// only CommonJS-like environments that support module.exports,
</span></span><span style=display:flex><span>// like Node.
</span></span><span style=display:flex><span>module.exports = factory<span style=color:#960050;background-color:#1e0010>(</span>);
</span></span><span style=display:flex><span>} else <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>root<span style=color:#960050;background-color:#1e0010>[</span>&#39;jCaptcha&#39;] = factory<span style=color:#960050;background-color:#1e0010>(</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>}<span style=color:#960050;background-color:#1e0010>(</span>this, function <span style=color:#960050;background-color:#1e0010>(</span>) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&#34;use strict&#34;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>var generateRandomNum = function generateRandomNum<span style=color:#960050;background-color:#1e0010>(</span>) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>num1 = Math.round<span style=color:#960050;background-color:#1e0010>(</span>Math.random<span style=color:#960050;background-color:#1e0010>(</span>) <span style=color:#960050;background-color:#1e0010>*</span> 8) + 1;
</span></span><span style=display:flex><span>num2 = Math.round<span style=color:#960050;background-color:#1e0010>(</span>Math.random<span style=color:#960050;background-color:#1e0010>(</span>) <span style=color:#960050;background-color:#1e0010>*</span> 8) + 1;
</span></span><span style=display:flex><span>sumNum = num1 + num2;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>//
</span></span><span style=display:flex><span>// @param <span style=color:#960050;background-color:#1e0010>{</span>Object}
</span></span><span style=display:flex><span>// @param <span style=color:#960050;background-color:#1e0010>{</span>Object}
</span></span><span style=display:flex><span>// @param <span style=color:#960050;background-color:#1e0010>{</span>Boolean}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>var setCaptcha = function setCaptcha<span style=color:#960050;background-color:#1e0010>(</span>$el, options, shouldReset) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>if <span style=color:#960050;background-color:#1e0010>(</span>!shouldReset) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>  $el.insertAdjacentHTML<span style=color:#960050;background-color:#1e0010>(</span>&#39;beforebegin&#39;, &#34;&lt;canvas class=\&#34;&#34;.concat<span style=color:#960050;background-color:#1e0010>(</span>options.canvasClass, &#34;\&#34;\n                    width=\&#34;&#34;).concat<span style=color:#960050;background-color:#1e0010>(</span>options.canvasStyle.width, &#34;\&#34; height=\&#34;&#34;).concat<span style=color:#960050;background-color:#1e0010>(</span>options.canvasStyle.height, &#34;\&#34;&gt;\n                &lt;/canvas&gt;\n            &#34;));
</span></span><span style=display:flex><span>  this.$captchaEl = document.querySelector<span style=color:#960050;background-color:#1e0010>(</span>&#34;.&#34;.concat(<span style=color:#a6e22e>options.canvasClass</span>));
</span></span><span style=display:flex><span>  this.$captchaTextContext = this.$captchaEl.getContext<span style=color:#960050;background-color:#1e0010>(</span>&#39;2d&#39;);
</span></span><span style=display:flex><span>  this.$captchaTextContext = Object.assign<span style=color:#960050;background-color:#1e0010>(</span>this.$captchaTextContext, options.canvasStyle);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>this.$captchaTextContext.clearRect<span style=color:#960050;background-color:#1e0010>(</span>0, 0, options.canvasStyle.width, options.canvasStyle.height);
</span></span><span style=display:flex><span>this.$captchaTextContext.fillText<span style=color:#960050;background-color:#1e0010>(</span>&#34;&#34;.concat<span style=color:#960050;background-color:#1e0010>(</span>num1, &#34; + &#34;).concat<span style=color:#960050;background-color:#1e0010>(</span>num2, &#34; &#34;).concat(<span style=color:#a6e22e>options.requiredValue</span>), 0, 0);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>// @param <span style=color:#960050;background-color:#1e0010>{</span>Object}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>var jCaptcha = function jCaptcha<span style=color:#960050;background-color:#1e0010>(</span>) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>var options = arguments.length &gt; 0 &amp;&amp; arguments[<span style=color:#a6e22e>0</span>] !== undefined ? arguments[<span style=color:#a6e22e>0</span>] : <span style=color:#960050;background-color:#1e0010>{</span>};
</span></span><span style=display:flex><span>this.options = Object.assign<span style=color:#960050;background-color:#1e0010>({</span>}, <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>  el: &#39;.jCaptcha&#39;,
</span></span><span style=display:flex><span>  canvasClass: &#39;jCaptchaCanvas&#39;,
</span></span><span style=display:flex><span>  requiredValue: &#39;=&#39;,
</span></span><span style=display:flex><span>  resetOnError: true,
</span></span><span style=display:flex><span>  focusOnError: true,
</span></span><span style=display:flex><span>  clearOnSubmit: true,
</span></span><span style=display:flex><span>  callback: null,
</span></span><span style=display:flex><span>  canvasStyle: <span style=color:#960050;background-color:#1e0010>{</span>}
</span></span><span style=display:flex><span>}, options);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>this._init<span style=color:#960050;background-color:#1e0010>(</span>);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>var sumNum, num1, num2;
</span></span><span style=display:flex><span>var numberOfTries = 0;
</span></span><span style=display:flex><span>;
</span></span><span style=display:flex><span>jCaptcha.prototype = <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>_init: function _init<span style=color:#960050;background-color:#1e0010>(</span>) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>  this.$el = document.querySelector(<span style=color:#a6e22e>this.options.el</span>);
</span></span><span style=display:flex><span>  generateRandomNum<span style=color:#960050;background-color:#1e0010>(</span>);
</span></span><span style=display:flex><span>  setCaptcha.call<span style=color:#960050;background-color:#1e0010>(</span>this, this.$el, this.options);
</span></span><span style=display:flex><span>},
</span></span><span style=display:flex><span>validate: function validate<span style=color:#960050;background-color:#1e0010>(</span>) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>  numberOfTries++;
</span></span><span style=display:flex><span>  this.callbackReceived = this.callbackReceived || typeof this.options.callback == &#39;function&#39;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  if <span style=color:#960050;background-color:#1e0010>(</span>this.$el.value != sumNum) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    this.callbackReceived &amp;&amp; this.options.callback<span style=color:#960050;background-color:#1e0010>(</span>&#39;error&#39;, this.$el, numberOfTries);
</span></span><span style=display:flex><span>    this.options.resetOnError === true &amp;&amp; this.reset<span style=color:#960050;background-color:#1e0010>(</span>);
</span></span><span style=display:flex><span>    this.options.focusOnError === true &amp;&amp; this.$el.focus<span style=color:#960050;background-color:#1e0010>(</span>);
</span></span><span style=display:flex><span>    this.options.clearOnSubmit === true &amp;&amp; <span style=color:#960050;background-color:#1e0010>(</span>this.$el.value = &#39;&#39;);
</span></span><span style=display:flex><span>  } else <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    this.callbackReceived &amp;&amp; this.options.callback<span style=color:#960050;background-color:#1e0010>(</span>&#39;success&#39;, this.$el, numberOfTries);
</span></span><span style=display:flex><span>    this.options.clearOnSubmit === true &amp;&amp; <span style=color:#960050;background-color:#1e0010>(</span>this.$el.value = &#39;&#39;);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>},
</span></span><span style=display:flex><span>reset: function reset<span style=color:#960050;background-color:#1e0010>(</span>) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>  generateRandomNum<span style=color:#960050;background-color:#1e0010>(</span>);
</span></span><span style=display:flex><span>  setCaptcha.call<span style=color:#960050;background-color:#1e0010>(</span>this, this.$el, this.options, true);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>return jCaptcha;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// Permet d&#39;afficher/déployer un Captcha.
</span></span><span style=display:flex><span>// Option, choisissez un nombre d&#39;essai maximum pour valider le captcha.
</span></span><span style=display:flex><span>    const maxNumberOfTries = 5;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    // Captcha SETUP Initial
</span></span><span style=display:flex><span>    var myCaptcha = new jCaptcha<span style=color:#960050;background-color:#1e0010>({</span>
</span></span><span style=display:flex><span>        el: &#39;.jCaptcha&#39;,
</span></span><span style=display:flex><span>        canvasClass: &#39;jCaptchaCanvas&#39;,
</span></span><span style=display:flex><span>        canvasStyle: <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    // properties for captcha stylings
</span></span><span style=display:flex><span>    width: 100,
</span></span><span style=display:flex><span>    height: 15,
</span></span><span style=display:flex><span>    textBaseline: &#39;top&#39;,
</span></span><span style=display:flex><span>    font: &#39;15px Segoe UI bolder&#39;,
</span></span><span style=display:flex><span>    textAlign: &#39;left&#39;,
</span></span><span style=display:flex><span>    fillStyle: &#39;red&#39;,
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        // set callback function
</span></span><span style=display:flex><span>        callback: function <span style=color:#960050;background-color:#1e0010>(</span>response, $captchaInputElement, numberOfTries) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            if <span style=color:#960050;background-color:#1e0010>(</span>maxNumberOfTries === numberOfTries) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>              // nombre maximum de tentatives atteintes!
</span></span><span style=display:flex><span>                // e.g. disable the form:
</span></span><span style=display:flex><span>                form.removeEventListener<span style=color:#960050;background-color:#1e0010>(</span>&#39;submit&#39;, formSubmit);
</span></span><span style=display:flex><span>                $captchaInputElement.classList.add<span style=color:#960050;background-color:#1e0010>(</span>&#39;disabled&#39;);
</span></span><span style=display:flex><span>                $captchaInputElement.placeholder = &#39;Maximum attempts reached!&#39;;
</span></span><span style=display:flex><span>                $captchaInputElement.setAttribute<span style=color:#960050;background-color:#1e0010>(</span>&#39;disabled&#39;, &#39;true&#39;);
</span></span><span style=display:flex><span>                document.getElementById<span style=color:#960050;background-color:#1e0010>(</span>&#34;submitButton&#34;).setAttribute<span style=color:#960050;background-color:#1e0010>(</span>&#39;disabled&#39;, &#39;true&#39;);
</span></span><span style=display:flex><span>                return;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            if <span style=color:#960050;background-color:#1e0010>(</span>response == &#39;success&#39;) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>              // réponse valide !
</span></span><span style=display:flex><span>                $captchaInputElement.classList.remove<span style=color:#960050;background-color:#1e0010>(</span>&#39;error&#39;);
</span></span><span style=display:flex><span>                $captchaInputElement.classList.add<span style=color:#960050;background-color:#1e0010>(</span>&#39;success&#39;);
</span></span><span style=display:flex><span>                $captchaInputElement.placeholder = &#34;Succès !&#34;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                // Donc maintenant on continue l&#39;envoi du formulaire!
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>              // pseudonyme vide
</span></span><span style=display:flex><span>              if<span style=color:#960050;background-color:#1e0010>(</span>form.yourname.value == &#34;&#34;)<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>                  form.warningComment.style.display = &#39;block&#39;;
</span></span><span style=display:flex><span>                  form.warningComment.innerText = &#34;Veuillez saisir votre pseudonyme&#34;;
</span></span><span style=display:flex><span>                  return false;
</span></span><span style=display:flex><span>              }
</span></span><span style=display:flex><span>              // commentaire vide
</span></span><span style=display:flex><span>              else if<span style=color:#960050;background-color:#1e0010>(</span>form.yourcomment.value == &#34;&#34;)<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>                  form.warningComment.style.display = &#39;block&#39;;
</span></span><span style=display:flex><span>                  form.warningComment.innerText = &#34;S&#39;il vous plait tapez un commentaire&#34;;
</span></span><span style=display:flex><span>                  return false;
</span></span><span style=display:flex><span>              }
</span></span><span style=display:flex><span>              // input caché n&#39;est pas vide -&gt; pas humain
</span></span><span style=display:flex><span>              else if<span style=color:#960050;background-color:#1e0010>(</span>form.youarenotarobot1.value != &#34;&#34;)<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>                return false;
</span></span><span style=display:flex><span>              }
</span></span><span style=display:flex><span>              // tout est bon !
</span></span><span style=display:flex><span>              else<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>                  form.submitButton.disabled = true;
</span></span><span style=display:flex><span>                  form.warningComment.style.display = &#39;none&#39;;
</span></span><span style=display:flex><span>                  form.warningComment.innerText = &#34;&#34;;
</span></span><span style=display:flex><span>                  form.submitButton.innerText = &#34;Envoi...&#34;;
</span></span><span style=display:flex><span>                  document.getElementById<span style=color:#960050;background-color:#1e0010>(</span>&#34;commentsform&#34;).submit<span style=color:#960050;background-color:#1e0010>(</span>);
</span></span><span style=display:flex><span>                  return true;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            if <span style=color:#960050;background-color:#1e0010>(</span>response == &#39;error&#39;) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>              // le résultat n&#39;est pas le bon
</span></span><span style=display:flex><span>                $captchaInputElement.classList.remove<span style=color:#960050;background-color:#1e0010>(</span>&#39;success&#39;);
</span></span><span style=display:flex><span>                $captchaInputElement.classList.add<span style=color:#960050;background-color:#1e0010>(</span>&#39;error&#39;);
</span></span><span style=display:flex><span>                $captchaInputElement.placeholder = &#34;S&#39;il vous plaît essayez à nouveau !&#34;;
</span></span><span style=display:flex><span>                return false;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// Valider le JsCaptcha depuis un envoi du formulaire.
</span></span><span style=display:flex><span>function formSubmit(<span style=color:#a6e22e>e</span>) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    e.preventDefault<span style=color:#960050;background-color:#1e0010>(</span>);
</span></span><span style=display:flex><span>    // myCaptcha validate
</span></span><span style=display:flex><span>    myCaptcha.validate<span style=color:#960050;background-color:#1e0010>(</span>);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// J&#39;appelle la fonction formSubmit si je clique sur submit depuis le formulaire Id=&#34;commentsform&#34;.
</span></span><span style=display:flex><span>var form = document.getElementById<span style=color:#960050;background-color:#1e0010>(</span>&#34;commentsform&#34;);
</span></span><span style=display:flex><span>form.addEventListener<span style=color:#960050;background-color:#1e0010>(</span>&#39;submit&#39;, formSubmit);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// Le commentaire bien parti, script pour afficher le message merci!
</span></span><span style=display:flex><span>if <span style=color:#960050;background-color:#1e0010>(</span>/comment-thankyou/.test(<span style=color:#a6e22e>window.location.href</span>)) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>document.getElementById<span style=color:#960050;background-color:#1e0010>(</span>&#39;comment-thankyou&#39;).style.display = &#39;block&#39;;
</span></span><span style=display:flex><span>}else<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>document.getElementById<span style=color:#960050;background-color:#1e0010>(</span>&#39;comment-thankyou&#39;).style.display = &#39;none&#39;;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> FIN Staticman + Anti-Spam section <span style=color:#960050;background-color:#1e0010>*</span>/
</span></span></code></pre></div><blockquote><p>Notes: Dans le partial footer, mettez votre script en bas des pages pour éviter les erreurs.</p></blockquote><h3 id=css>css</h3><p>Pour styliser le formulaire et l&rsquo;affichage avec les boutons c&rsquo;est comme cela :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-angular2 data-lang=angular2><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> Styles for Staticman de lespace commentaire
</span></span><span style=display:flex><span>-----------------------------------------------------------------------------------------------------<span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> Bouton pour ouvrir l&#39;espace commentaire <span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>#<span style=color:#a6e22e>staticman-button</span><span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    color: var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>    margin-top: var(<span style=color:#a6e22e>--gap</span>);
</span></span><span style=display:flex><span>    border: 1px solid var(<span style=color:#a6e22e>--border</span>);
</span></span><span style=display:flex><span>    padding-inline-start: var(<span style=color:#a6e22e>--radius</span>);
</span></span><span style=display:flex><span>    border-radius: var(<span style=color:#a6e22e>--radius</span>);
</span></span><span style=display:flex><span>    display: flex;
</span></span><span style=display:flex><span>    overflow-x: auto;
</span></span><span style=display:flex><span>    font-size: 1em;
</span></span><span style=display:flex><span>    width: 100%;
</span></span><span style=display:flex><span>    padding: 0.25em 0.75em;
</span></span><span style=display:flex><span>    margin-bottom: 1rem;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> Section staticman-comments Ou js-comments <span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>#<span style=color:#a6e22e>staticman-comments</span> <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    display: none;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.staticman-comments <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    color: var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>    margin-bottom: 2rem;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> Article seul <span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>.static-comment<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    color: var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>    margin-top: var(<span style=color:#a6e22e>--gap</span>);
</span></span><span style=display:flex><span>    border: 1px solid var(<span style=color:#a6e22e>--border</span>);
</span></span><span style=display:flex><span>    padding-inline-start: var(<span style=color:#a6e22e>--radius</span>);
</span></span><span style=display:flex><span>    border-radius: var(<span style=color:#a6e22e>--radius</span>);
</span></span><span style=display:flex><span>    display: flex;
</span></span><span style=display:flex><span>    overflow-x: auto;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> Article auteur + content + date <span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>.staticman-comments .comment-author, .comment-content, .comment-timestamp <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    margin-top: 0;
</span></span><span style=display:flex><span>    color: var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>    line-height: 1.6;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.staticman-comments article<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    display: grid;
</span></span><span style=display:flex><span>    grid-template-columns: 0.5fr 0.5fr;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.staticman-comments .comment-author <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    grid-column: 1;
</span></span><span style=display:flex><span>    grid-row: 1;
</span></span><span style=display:flex><span>    font-size: 0.8em;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.staticman-comments .comment-timestamp <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    grid-column: 2;
</span></span><span style=display:flex><span>    grid-row: 1;
</span></span><span style=display:flex><span>    text-align: right;
</span></span><span style=display:flex><span>    margin-right: 5px;
</span></span><span style=display:flex><span>    font-size: 0.8em;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.staticman-comments .comment-timestamp a<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    box-shadow: 0 1px 0;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.staticman-comments .comment-timestamp a:hover <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    font-weight: bolder;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.staticman-comments .comment-content<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    margin-top: 0.5rem;
</span></span><span style=display:flex><span>    grid-column: 1/3;
</span></span><span style=display:flex><span>    grid-row: 2;
</span></span><span style=display:flex><span>    font-size: 1em;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.comment-content a<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    color: var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>    border-bottom: 1px solid var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.comment-content a:hover<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    font-weight: bolder;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.staticman-comments .comment-content p <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    padding: 5px 1rem 5px 1rem;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> Formulaire <span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>.js-form<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    color: var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>    margin-top: var(<span style=color:#a6e22e>--gap</span>);
</span></span><span style=display:flex><span>    border: 1px solid var(<span style=color:#a6e22e>--border</span>);
</span></span><span style=display:flex><span>    padding-inline-start: var(<span style=color:#a6e22e>--radius</span>);
</span></span><span style=display:flex><span>    border-radius: var(<span style=color:#a6e22e>--radius</span>);
</span></span><span style=display:flex><span>    display: flex;
</span></span><span style=display:flex><span>    overflow-x: auto;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>fieldset <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    padding: 15px;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> les Inputs du Formulaire <span style=color:#960050;background-color:#1e0010>(</span>pseudo+jscaptcha) <span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>.staticman-comments input <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    color: var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>    border: 1px solid var(<span style=color:#a6e22e>--border</span>);
</span></span><span style=display:flex><span>    width: 100%;
</span></span><span style=display:flex><span>    font-family:inherit;
</span></span><span style=display:flex><span>    font-size: 0.85rem;
</span></span><span style=display:flex><span>    margin-top: 0.5rem;
</span></span><span style=display:flex><span>    margin-bottom: 1rem;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> Les placeholder ^^ <span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>.js-form input::placeholder<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    color: var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>        font-size: 1em;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.js-form textarea::placeholder<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    color: var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>        font-size: 1em;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> le textarea du formulaire (<span style=color:#a6e22e>comment</span>) <span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>.staticman-comments textarea <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    color: var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>    border: 1px solid var(<span style=color:#a6e22e>--border</span>);
</span></span><span style=display:flex><span>    vertical-align: top;
</span></span><span style=display:flex><span>    height: 10em;
</span></span><span style=display:flex><span>    width: 100%;
</span></span><span style=display:flex><span>    font-family:inherit;
</span></span><span style=display:flex><span>    font-size: 0.85rem;
</span></span><span style=display:flex><span>    margin-top: 0.5rem;
</span></span><span style=display:flex><span>    margin-bottom: 1rem;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> label et bouton <span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>.staticman-comments label, .staticman-comments button <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    margin-top: 0.5rem;
</span></span><span style=display:flex><span>    font-size: 0.85rem;
</span></span><span style=display:flex><span>    font-size: 1em;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> warning comment ouput <span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>#<span style=color:#a6e22e>warningComment</span><span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    color: var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>    margin-top: 1rem;
</span></span><span style=display:flex><span>    margin-bottom: 1rem;
</span></span><span style=display:flex><span>    width: 100%;
</span></span><span style=display:flex><span>    display: block;
</span></span><span style=display:flex><span>    font-family:inherit;
</span></span><span style=display:flex><span>    font-size: 0.85rem;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>#<span style=color:#a6e22e>warningComment</span> a<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    color: var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>    border-bottom: 1px solid var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>#<span style=color:#a6e22e>warningComment</span> a:hover<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    font-weight: bolder;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> bouton envoyer <span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>#<span style=color:#a6e22e>submitButton</span><span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    color: var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>    border-bottom: 1px solid var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>    font-size: 1em;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>#<span style=color:#a6e22e>submitButton:hover</span><span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    font-weight: bolder;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> post envoi du commentaire  aside note + section id thankyou + p<span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>.note<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    color: var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.comment-merci<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    color: var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>    display: flex;
</span></span><span style=display:flex><span>    overflow-x: auto;
</span></span><span style=display:flex><span>    width: 100%;
</span></span><span style=display:flex><span>    padding: 0.25em 0.75em;
</span></span><span style=display:flex><span>    margin-bottom: 1rem;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.comment-merci a<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>  border-bottom: 1px solid var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.comment-merci a:hover<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>  font-weight: bolder;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> Anti-Spam limite d&#39;essai atteinte css<span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>.jCaptcha.disabled~.button <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    cursor: not-allowed;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> JS NoScript Message<span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>.no-script-text<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    color: var(<span style=color:#a6e22e>--content</span>);
</span></span><span style=display:flex><span>    margin-top: var(<span style=color:#a6e22e>--gap</span>);
</span></span><span style=display:flex><span>    border: 1px solid var(<span style=color:#a6e22e>--border</span>);
</span></span><span style=display:flex><span>    padding-inline-start: var(<span style=color:#a6e22e>--radius</span>);
</span></span><span style=display:flex><span>    border-radius: var(<span style=color:#a6e22e>--radius</span>);
</span></span><span style=display:flex><span>    display: flex;
</span></span><span style=display:flex><span>    overflow-x: auto;
</span></span><span style=display:flex><span>    width: 100%;
</span></span><span style=display:flex><span>    padding: 0.25em 0.75em;
</span></span><span style=display:flex><span>    margin-bottom: 1rem;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>/<span style=color:#960050;background-color:#1e0010>*</span> écran &lt; 800 <span style=color:#960050;background-color:#1e0010>*</span>/
</span></span><span style=display:flex><span>@media screen and <span style=color:#960050;background-color:#1e0010>(</span>max-width: 800px) <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>  .static-comment .comment-content p<span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    padding: 2.5px 0.5rem 2.5px 0.5rem;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  fieldset <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>    padding: 5px;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>A vous de choisir en fonction de votre architecture css, en fonction du thème choisi.</p><p>Pour styliser le captcha c&rsquo;est plus complexe cherchez <code>// Captcha SETUP Initial</code> dans votre javascript.</p><h2 id=protection-contre-le-spam>Protection contre le spam</h2><p>A la recherche de l&rsquo;utilité, de la vie privée et de la performance.</p><p>Bon l&rsquo;utilité, a part gêner le handicap&mldr;
Tout se fait côté client donc tout peut se casser.</p><ul><li><a href=https://github.com/dessant/buster>Buster: Captcha Solver for Humans</a></li></ul><p>Les CAPTCHA diminuent les performances de vos sites web/apps.</p><p>Le REcaptcha favorise a outrance chromium et les comptes google.</p><p>Il faut que la réponse soit sur un serveur distant, sinon le robot (peut) lire la réponse.</p><p>Inutile si peu de visiteurs, car le spam est un marché, qui va ouvrir un commerce où il n&rsquo;y a personne ?</p><p>J&rsquo;utilise 3 protections (toutes dépassées):</p><ul><li>Pas de javascript = pas de commentaire. Il faut javascript pour afficher les commentaires car il faut cliquer sur le bouton &ldquo;ouvrir espace commentaire&rdquo;.</li><li>Un input caché <code>&lt;input type="hidden" id="youarenotarobot1"></code>, le visiteur(non-robot/humain) ne le voit pas mais le robot oui, si il le remplit alors ce n&rsquo;est pas un humain.</li><li><a href=https://github.com/robiveli/js-captcha>js-captcha de robiveli</a>.</li></ul><p><em><strong>Après quelques semaines d&rsquo;essais. Un robot a cassé le pseudo anti-spam. La seule solution est l&rsquo;autre solution.</strong></em></p><h3 id=autre-solution>autre solution</h3><p>Posséder un serveur, y ajouter staticman + <a href=https://visualcaptcha.net/>visual captcha</a>.<br>Vous pouvez également interdire les url dans le contenu des commentaires.</p><p><em><strong>C&rsquo;est la seule solution FIABLE.</strong></em></p><h2 id=notes-importantes>Notes importantes</h2><p><em><strong>Ces notes dates, certains passages sont a ne pas prendre en compte.</strong></em></p><ul><li>Il n&rsquo;y pas de protection contre le spam vraiment active, si jamais lisez l&rsquo;article <a href=https://jvblog.net/configuring-staticman-hugo/>Tuto en anglais de 2020</a>.</li><li>Il n&rsquo;y a pas de modération avant affichage.</li><li>Ne pas hésiter à observer <a href=https://github.com/criminau/site>le code source du site</a></li><li>Cette version est très simple, sans réponse entre commentaires, avec trois champs requis seulement.</li><li>Pour observer <a href=https://github.com/criminau/site/tree/master/data/>où se stocke un commentaire</a>.</li></ul><h2 id=astuce>Astuce</h2><ul><li><p>Je maîtrise mal le vocabulaire git mais avant de push -u vers le dépôt github, pensez à utiliser <code>git pull</code> pour &ldquo;rapatrier&rdquo; les nouveaux commentaires sur votre dépôt local.</p></li><li><p>Dans la version (v3) de staticman, il n&rsquo;y aurait plus besoin du Personal access tokens. Mais je ne sais comment procéder.</p></li><li><p>L&rsquo;on peut passer directement via le <a href=https://github.com/eduardoboucas/staticman#introduction>bouton deploy to heroku</a>, avec <a href=https://github.com/eduardoboucas/staticman/issues/402#issuecomment-770758147>ce commentaire</a> vous devriez pouvoir y arriver sans passer par heroku CLI.</p></li></ul><h3 id=problèmes-rencontrés>Problèmes rencontrés</h3><ul><li>L&rsquo;utilisation de <code>{{ $slug := replace $.RelPermalink "/" "-" }}</code> avec <code>name="options[slug]"</code> ne permet l&rsquo;affichage des commentaires sur les articles où les titres ont des accents. Solution trouvée avec <code>{{ replace $.File.Path "/" "-" }}</code>.</li><li>J&rsquo;ai supprimé du script de js-captcha, je ne sais a quoi il sert. <kbd>Il ne fallait pas le faire</kbd>.</li><li>Pour utilsier ReCaptcha avec staticman, le script n&rsquo;est pas dispo sur les fichiers de ce site.</li><li>J&rsquo;ai un souci de cache-control depuis que les commentaires sont disponibles <kbd>[résolu]</kbd>.</li><li>Il faut reconstruire le site pour afficher un commentaire, ce qui peu prendre du temps, surtout si le dino (herokuapp) dort..<kbd>C&rsquo;est faux !</kbd></li><li>Il faut patienter le temps que le dino (votreapp) envoi les données vers le dossier <code>/data/</code>, rafraîchir la page, r-ouvrir l&rsquo;espace commentaire et hop. La données dans le dossier <code>/data/</code> s&rsquo;affichent sans latence.</li></ul><h2 id=sources>Sources</h2><h3 id=tutos>tutos</h3><p><a href=https://www.datascienceblog.net/post/other/staticman_comments/>Tuto en anglais de 2018</a><br><a href=https://yasoob.me/posts/running_staticman_on_static_hugo_blog_with_nested_comments/>Tuto en anglais de 2019</a><br><a href=https://jvblog.net/configuring-staticman-hugo/>Tuto en anglais de 2020</a><br><a href=https://spinningnumbers.org/a/staticman-heroku.html#site-configuration-files>Tuto en anglais de 2020 2</a></p><h3 id=fichiers>fichiers</h3><p>Ceux au complet dont je me suis servi.</p><p><a href=https://gist.github.com/JulioV/8f3bfd3113764fc9c66726a12d651820>staticman-js-common.js</a><br><a href=https://gist.github.com/JulioV/5e0297961e4425054ec94c44c880fc70>staticman-styles.css</a><br><a href=https://gist.github.com/JulioV/c1386fde8920406f3871666bf059d1a3>staticman.html</a><br><a href=https://github.com/robiveli/js-captcha/blob/master/src/js/index.js>js-captcha-index.js</a><br><a href=https://github.com/robiveli/js-captcha/blob/master/src/index.html>js-captcha-index.html</a></p></div><nav class=paginav><a class=prev href=https://criminau.xyz/articles/hugo-100-lighthouse.html title="Hugo 100% lighthouse"><span class=title>« Page Précédente</span><br><span>Hugo 100% Lighthouse</span></a>
<a class=next href=https://criminau.xyz/articles/nouvelle-caledonie-vs-french-republic.html title="La nouvelle calédonie, collectivité de la république française"><span class=title>Page Suivante »</span><br><span>La Nouvelle-Calédonie, collectivité de la République Française</span></a></nav><div class=share-buttons><p title="Copier le lien de la page" target=_blank rel="noopener noreferrer" id=copy-page-link><svg [role="img" viewBox="0 0 512 512" onclick="Copy();"><path d="M448 0H224c-35.3.0-64 28.65-64 64v224c0 35.35 28.65 64 64 64h224c35.35.0 64-28.65 64-64V64c0-35.35-28.7-64-64-64zm16 288c0 8.822-7.178 16-16 16H224C215.2 304 208 296.8 208 288V64c0-8.822 7.178-16 16-16h224c8.822.0 16 7.178 16 16V288zM304 448c0 8.822-7.178 16-16 16H64c-8.822.0-16-7.178-16-16V224c0-8.822 7.178-16 16-16h64V160H64c-35.35.0-64 28.7-64 64v224c0 35.35 28.65 64 64 64h224c35.35.0 64-28.65 64-64v-64h-48v64z"/></svg></p><a title="Partager via Twitter" target=_blank rel="noopener noreferrer" aria-label="Partager A Propos sur Twitter" href="https://twitter.com/intent/tweet/?text=A%20Propos&url=https%3a%2f%2fcriminau.xyz%2fapropos%2f&hashtags="><svg [role="img" viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a title="Partager via Linkedin" target=_blank rel="noopener noreferrer" aria-label="Partager A Propos sur Linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcriminau.xyz%2fapropos%2f&title=A%20Propos&summary=A%20Propos&source=https%3a%2f%2fcriminau.xyz%2fapropos%2f"><svg [role="img" viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a title="Partager via reddit" target=_blank rel="noopener noreferrer" aria-label="Partager A Propos sur Reddit" href="https://reddit.com/submit?url=https%3a%2f%2fcriminau.xyz%2fapropos%2f&title=A%20Propos"><svg [role="img" viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a title="Partager via Facebook" target=_blank rel="noopener noreferrer" aria-label="Partager A Propos sur Facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fcriminau.xyz%2fapropos%2f"><svg [role="img" viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a title="Partager via Whatsapp" target=_blank rel="noopener noreferrer" aria-label="Partager A Propos sur Whatsapp" href="https://api.whatsapp.com/send?text=A%20Propos%20-%20https%3a%2f%2fcriminau.xyz%2fapropos%2f"><svg [role="img" viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a title="Partager vers Telegram" target=_blank rel="noopener noreferrer" aria-label="Partager A Propos sur Telegram" href="https://telegram.me/share/url?text=A%20Propos&url=https%3a%2f%2fcriminau.xyz%2fapropos%2f"><svg [role="img" viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></article><footer class=footer role=contentinfo><span>&copy; 2023&nbsp;·&nbsp;<a title="page d'accueil" href=https://criminau.xyz/>Journal Subversif</a>&nbsp;·&nbsp;<p class=tl2 id=tl2 title="Retour en haut de la page">retour en haut</p>&nbsp;</span></footer><button aria-label="Retour en haut de la page" class=top-link id=top-link type=button name="Haut de page"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"/></svg></button>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script rel=preload async src=https://criminau.xyz/js/script.min.3a608e9d986784c69adff672b858f20f4eee6e1c7d85a09cc3a5c211ef915d78.js integrity="sha256-OmCOnZhnhMaa3/ZyuFjyD07ubhx9haCcw6XCEe+RXXg="></script>
<script rel=preload async src=https://criminau.xyz/js/fixedsearch.min.aa2f995a79c63744025c85e5c71c561769233a5d6dc3e34bee1c03c08fdf3bf7.js integrity="sha256-qi+ZWnnGN0QCXIXlxxxWF2kjOl1tw+NL7hwDwI/fO/c="></script>
<script rel=preload async src=https://criminau.xyz/js/fuse.min.js></script></body></html>