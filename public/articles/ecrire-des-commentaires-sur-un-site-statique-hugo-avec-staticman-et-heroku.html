<!doctype html><html lang=fr><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Ecrire des commentaires sur un site statique (hugo) avec staticman et heroku -</title><meta name=robots content="index,follow"><meta name=robots content="all"><meta name=googlebot content="index,follow"><meta name=referrer content="no-referrer"><link rel=alternate hreflang=fr-be href=https://subversive.eu/articles/ecrire-des-commentaires-sur-un-site-statique-hugo-avec-staticman-et-heroku.html><link rel=alternate hreflang=fr-fr href=https://subversive.eu/articles/ecrire-des-commentaires-sur-un-site-statique-hugo-avec-staticman-et-heroku.html><link rel=alternate hreflang=fr-ch href=https://subversive.eu/articles/ecrire-des-commentaires-sur-un-site-statique-hugo-avec-staticman-et-heroku.html><meta name=description content="Bonjour !
Tutoriel pour permettre l&rsquo;écriture de commentaires sur un site internet statique avec hugo cms, staticman et heroku."><meta name=keywords content="Commentaires,site,statique,hugo,gohugo,staticman,heroku,open-source,github,netlify"><meta name=author content="subversive.eu"><link rel=canonical href=https://subversive.eu/articles/ecrire-des-commentaires-sur-un-site-statique-hugo-avec-staticman-et-heroku.html><meta name=twitter:widgets:theme content="light"><meta name=twitter:widgets:border-color content="#55acee"><meta name=twitter:dnt content="on"><link href=https://subversive.eu/assets/css/secureCSS.min.1bcdd227256e3cd6dc8cf4dad66cc9f0970df70e6c3cb2aea62029087eabf658.css rel="preload stylesheet" as=style integrity="sha256-G83SJyVuPNbcjPTa1mzJ8JcN9w5sPLKupiApCH6r9lg="><link rel=apple-touch-icon sizes=180x180 href=../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../favicon-16x16.png><link rel=manifest href=../site.webmanifest><meta name=generator content="Hugo 0.80.0"><link rel=alternate type=application/rss+xml href=https://subversive.eu/index.xml title=subversive.eu><meta property="og:title" content="Ecrire des commentaires sur un site statique (hugo) avec staticman et heroku"><meta property="og:description" content="Bonjour !
Tutoriel pour permettre l&rsquo;écriture de commentaires sur un site internet statique avec hugo cms, staticman et heroku."><meta property="og:type" content="article"><meta property="og:url" content="https://subversive.eu/articles/ecrire-des-commentaires-sur-un-site-statique-hugo-avec-staticman-et-heroku.html"><meta property="og:image" content="https://subversive.eu/android-chrome-192x192.png"><meta property="article:published_time" content="2021-02-05T17:00:00+00:00"><meta property="article:modified_time" content="2021-02-05T17:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://subversive.eu/android-chrome-192x192.png"><meta name=twitter:title content="Ecrire des commentaires sur un site statique (hugo) avec staticman et heroku"><meta name=twitter:description content="Bonjour !
Tutoriel pour permettre l&rsquo;écriture de commentaires sur un site internet statique avec hugo cms, staticman et heroku."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Ecrire des commentaires sur un site statique (hugo) avec staticman et heroku","name":"Ecrire des commentaires sur un site statique (hugo) avec staticman et heroku","description":"Bonjour !\nTutoriel pour permettre l\u0026amp;rsquo;écriture de commentaires sur un site internet statique avec hugo cms, staticman et heroku.\n","keywords":["Commentaires, site, statique, hugo, gohugo, staticman, heroku, open-source, github, netlify"],"articleBody":"Bonjour !\nTutoriel pour permettre l’écriture de commentaires sur un site internet statique avec hugo cms, staticman et heroku.\nObjectif, offrir a vos visiteurs la possibilité d’écrire des commentaires (ou autres) sans passer par un organisme tel que Graphcomment ou Disqus,… Ainsi vous respectez la vie privée de vos utilisateurs.\nTous les tutos disponibles sur le net (que j’ai lu) sont en anglais, ils datent et certains liens ne fonctionnent plus, bref j’ai du faire un mix de tuto pour y arriver, du coup je vous propose un tuto en français.\nN’oubliez jamais que ce qui fonctionne est sur les codes sources des sites. En ce sens si vous copiez-collez et qu’il y a une erreur, cherchez la mise à jour dans le code source sur github des sites qui tournent avec.\nRequis  Votre compte github principal. Un compte github vérifié qui sera votre bot (ex: githubbot). Conservez les identifiants et mots de passe. Un compte vérifié heroku. Conservez les identifiants et mot de passe. Heroku CLI.  J’utilise heroku pour ubuntu 20.04, les commandes sont un petit peu différentes mais la procédure reste la même.\nConsidérant que vous souhaitez installer staticman sur votre site, vous avez donc la capacité de gérer correctement votre site sous hugo (ou autre), de traduire les .toml en .yml et vice versa.\nBien il vous faudra de la patience pour ne manquer aucune étape.\nCommençons !\nCompte githubBOT Connectez vous à votre compte GithubBOT, allez dans paramètres du compte (settings du compte) - Developer settings - Personal access tokens - Generate new token.\nNommez le, sélectionnez (select scopes) : repo (tous) + user (tous) = Generate token. SAUVEGARDEZ bien votre token sur un fichier txt.\nApplication Heroku Télécharger staticman via github avec le lien https :\ngit clone https://github.com/eduardoboucas/staticman.git Allez dans le dossier staticman.\nCréez un fichier, nommez-le “Procfile”, insérez-y “npm start”.\nCréez une clé RSA :\nopenssl genrsa -out key.pem Créez un fichier, nommez-le “config.production.json”, insérez-y :\n notes :   votretoken ressemble a celui ci : b81f780f9f5f3be15a5595e618379756344cdsdk2 pour la rsaPrivateKey, collez l’intégralité du fichier key.pem\n { \"githubToken\": \"votretoken\", \"rsaPrivateKey\": \"-----BEGIN RSA PRIVATE KEY\\n-----la clé en entier-----\\nEND RSA PRIVATE KEY-----\", \"port\": 8080 } (toujours dans le dossier staticman)\nConnectez votre compte heroku avec :\nheroku login Toujours dans le dossier cloné plus haut (staticman), créez une application heroku :\nheroku create nomdevotreapplication Configuration (votretoken ressemble a celui ci : b81f780f9f5f3be15a5595e618379756344cdsdk2)\nheroku config:set NODE_ENV=\"production\" heroku config:set GITHUB_TOKEN=\"votretoken\" heroku config:set RSA_PRIVATE_KEY=\"$(cat ./key.pem)\" Créez une branche de production :\ngit checkout -b production 55d1430 Ajoutez dans le fichier .gitignore pour ignorer le fichier configuration:\n“!config.production.json”\nDéploiement git add . git commit -m \"Set up Staticman v3 for deployment to Heroku\" git push heroku production:master Si tout c’est bien passé, en se rendant sur https://nomdevotreapplication.herokuapp.com/ vous devez lire :\nHello from Staticman version 3.0.0!\nVotre app est disponible.\nAPI sur github Connectons votre githubBOT avec votre compteGITHUBprincipal.\nPour cela, depuis le dépôt de votre site, allez dans “settings” (paramètres de ce dépôt) - Manage Access - Invite a colaborator - yourgithubBOT - Invite.\nAcceptez l’invitation via le mail de votre githubBOT.\nAPI ponts et config Depuis le fichier staticman.yml, j’ai choisi volontairement de désactiver la modération, mais faites à votre guise.\nmoderation: true Cela va créer une “pull request” sur votre branche sélectionnée dans staticman.yml.\nA la source (la RACINE) de votre site, créez un fichier “staticman.yml” , insérez-y ce qu’il y a dans le miens\nDans votre fichier config.yml, ajoutez ou complétez :\nparams: comments: true staticman: api: 'https://nomdevotreapp.herokuapp.com/v2/entry/githubprincipal/repositorydusite/master/comments' Ajoutez également un dossier /data/ puis /comments/ et un fichier .gitkeep.\n(Cela permet de maintenir le git push avec les dossiers. Essayez sans, les dossiers vides ne suivront pas sur github).\nLa variable “comments” vous permet de désactiver les commentaires depuis le fichier single.html, vous pouvez aussi l’utiliser dans les params d’un article (ou page : comments: false).\nAfficher et écrire des commentaires depuis le site default Dans layout/_default/single.html insérez :\n{{- if and ($.Site.Params.comments) (ne .Params.comments false) }} {{- partial \"comments.html\" . }} {{- end }} fichier single.html. (cf juste au-dessus pour activer/désactiver)\nhtml Dans layouts/partials/comments.html (créez le fichier si besoin “comments.html”) insérez-y partials comments.html.\njavascript Le javascript est nécessaire dans cette config, à vous de le personnaliser en fonction de vos désirs.\nPour des soucis de performance, le script se trouve dans le fichier script.js.\n Notes: Dans le partials footer, mettez votre script en bas des pages pour éviter les erreurs.\n css Pour styliser le formulaire et l’affichage avec les boutons c’est ici : CSS styles\nA vous de choisir en fonction de votre architecture css, en fonction du thème choisi.\nPour styliser le captcha c’est plus complexe cherchez // Captcha SETUP Initial dans script.js.\nProtection contre le spam A la recherche de l’utilité, de la vie privée et de la performance.\nBuster: Captcha Solver for Humans\nLes CAPTCHA diminuent les performances de vos sites web /apps.\nLe REcaptcha favorise a outrance chromium et les comptes google.\nIl faut que la réponse soit sur un serveur distant, sinon le robot (peut) lire la réponse ? En attente de confirmation.\nInutile si peu de visiteurs, car le spam est un marché, qui va ouvrir un commerce où il n’y a personne ?\nJ’utilise 3 protections (toutes dépassées):\n Pas de javascript = pas de commentaire. Il faut javascript pour afficher les commentaires car il faut cliquer sur le bouton “ouvrir espace commentaire”. Un input caché , le visiteur(non-robot/humain) ne le voit pas mais le robot oui, si il le remplit alors ce n’est pas un humain. js-captcha de robiveli.  autre solution Posséder un serveur, y ajouter staticman + visual captcha.\nVous pouvez également interdire les url dans le contenu des commentaires.\nNotes importantes  Il n’y pas de protection contre le spam vraiment active, si jamais lisez l’article Tuto en anglais de 2020. Il n’y a pas de modération avant affichage. Ne pas hésiter à observer le code source du site Cette version est très simple, sans réponse entre commentaires, avec trois champs requis seulement. Pour observer où se stocke un commentaire.  Astuce   Je maîtrise mal le vocabulaire git mais avant de push -u vers le dépôt github, pensez à utiliser “git pull” pour “rapatrier” les nouveaux commentaires sur votre dépôt local.\n  Dans la version (v3) de staticman, il n’y aurait plus besoin du Personal access tokens. Mais je ne sais comment procéder.\n  Problème(s) rencontré(s)  L’utilisation de {{ $slug := replace $.RelPermalink \"/\" \"-\" }} avec name=\"options[slug]\" ne permet l’affichage des commentaires sur les articles où les titres ont des accents. Solution trouvée avec {{ replace $.File.Path \"/\" \"-\" }}. J’ai supprimé du script de js-captcha, je ne sais a quoi il sert, il se peut qu’il ne fallait pas le faire. De même pour staticman, le script ReCaptcha n’est pas dispo sur les fichiers de ce site. J’ai un souci de cache-control depuis que les commentaires sont disponibles [résolus]. Il faut reconstruire le site pour afficher un commentaire, ce qui peu prendre du temps, surtout si le dino (herokuapp) dort..  Sources tutos Tuto en anglais de 2018\nTuto en anglais de 2019\nTuto en anglais de 2020\nTuto en anglais de 2020 2\nfichiers Ceux au complet dont je me suis servi.\nstaticman-js-common.js\nstaticman-styles.css\nstaticman.html\njs-captcha-index.js\njs-captcha-index.html\n","wordCount":"1199","inLanguage":"fr","image":"https://subversive.eu/android-chrome-192x192.png","datePublished":"2021-02-05","dateModified":"2021-02-05","author":{"@type":"Person","name":"subversive.eu"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://subversive.eu/articles/ecrire-des-commentaires-sur-un-site-statique-hugo-avec-staticman-et-heroku.html"},"publisher":{"@type":"Organization","name":"Journal Subversif","logo":{"@type":"ImageObject","url":"https://subversive.eu/favicon.ico"}}}</script></head><body class=single id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else{if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}}</script><noscript><style type=text/css>.theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a title="Page d'accueil du site subversive.eu" href=https://subversive.eu/><h1>Journal Subversif</h1></a><span class=logo-switches><span class=theme-toggle><a title="Changer le thème" id=theme-toggle><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></a></span></span></div><ul class=menu id=menu onscroll=menu_on_scroll()><li><a title=Archives href=https://subversive.eu/archives/><span>Archives</span></a></li><li><a title="A propos" href=https://subversive.eu/apropos/><span>A propos</span></a></li></ul></nav></header><main class=main><article itemscope class=post-single><header class=post-header><h1 itemprop=name class=post-title>Ecrire des commentaires sur un site statique (hugo) avec staticman et heroku</h1><div class=post-meta>5 Feb, 2021&nbsp;·&nbsp;6 min&nbsp;·&nbsp;subversive.eu&nbsp;·&nbsp;<a href=../pdf/staticman-hugo-heroku.pdf target=_blank rel="noopener noreferrer" title="Télécharger staticman-hugo-heroku en version pdf" download>pdf</a></div></header><div class=toc><details><summary><div class=details>Table des matières</div></summary><blockquote><ul><li><a href=#requis>Requis</a></li><li><a href=#compte-githubbot>Compte githubBOT</a></li><li><a href=#application-heroku>Application Heroku</a><ul><li><a href=#configuration>Configuration</a></li><li><a href=#d%c3%a9ploiement>Déploiement</a></li></ul></li><li><a href=#api-sur-github>API sur github</a></li><li><a href=#api-ponts-et-config>API ponts et config</a></li><li><a href=#afficher-et-%c3%a9crire-des-commentaires-depuis-le-site>Afficher et écrire des commentaires depuis le site</a><ul><li><a href=#default>default</a></li><li><a href=#html>html</a></li><li><a href=#javascript>javascript</a></li><li><a href=#css>css</a></li></ul></li><li><a href=#protection-contre-le-spam>Protection contre le spam</a><ul><li><a href=#autre-solution>autre solution</a></li></ul></li><li><a href=#notes-importantes>Notes importantes</a></li><li><a href=#astuce>Astuce</a><ul><li><a href=#probl%c3%a8mes-rencontr%c3%a9s>Problème(s) rencontré(s)</a></li></ul></li><li><a href=#sources>Sources</a><ul><li><a href=#tutos>tutos</a></li><li><a href=#fichiers>fichiers</a></li></ul></li></ul></blockquote></details></div><div itemprop=content class=post-content><p>Bonjour !</p><p>Tutoriel pour permettre l&rsquo;écriture de commentaires sur un site internet statique avec <a rel="noopener noreferrer" target=_blank href=https://gohugo.io/ title="hugo cms">hugo cms</a>, <a rel="noopener noreferrer" target=_blank href=https://staticman.net/docs/ title=staticman>staticman</a> et <a rel="noopener noreferrer" target=_blank href=https://www.heroku.com/ title=heroku>heroku</a>.</p><p>Objectif, offrir a vos visiteurs la possibilité d&rsquo;écrire des commentaires (ou autres) sans passer par un organisme tel que Graphcomment ou Disqus,&mldr; Ainsi vous respectez la vie privée de vos utilisateurs.</p><p>Tous les tutos disponibles sur le net (que j&rsquo;ai lu) sont en anglais, ils datent et certains liens ne fonctionnent plus, bref j&rsquo;ai du faire un mix de tuto pour y arriver, du coup je vous propose un tuto en français.</p><p>N&rsquo;oubliez jamais que ce qui fonctionne est sur les codes sources des sites. En ce sens si vous copiez-collez et qu&rsquo;il y a une erreur, cherchez la mise à jour dans le code source sur github des sites qui tournent avec.</p><h2 id=requis>Requis</h2><ul><li>Votre compte github principal.</li><li>Un compte github vérifié qui sera votre bot (ex: githubbot). Conservez les identifiants et mots de passe.</li><li>Un compte vérifié <a rel="noopener noreferrer" target=_blank href=https://heroku.com title=heroku>heroku</a>. Conservez les identifiants et mot de passe.</li><li>Heroku CLI.</li></ul><p>J&rsquo;utilise <a rel="noopener noreferrer" target=_blank href=https://snapcraft.io/install/heroku/ubuntu title="heroku pour ubuntu 20.04">heroku pour ubuntu 20.04</a>, les commandes sont un petit peu différentes mais la procédure reste la même.</p><p>Considérant que vous souhaitez installer staticman sur votre site, vous avez donc la capacité de gérer correctement votre site sous hugo (ou autre), de traduire les .toml en .yml et vice versa.</p><p>Bien il vous faudra de la patience pour ne manquer aucune étape.</p><p>Commençons !</p><h2 id=compte-githubbot>Compte githubBOT</h2><p>Connectez vous à votre compte GithubBOT, allez dans paramètres du compte (settings du compte) -> Developer settings -> Personal access tokens -> Generate new token.</p><p>Nommez le, sélectionnez (select scopes) : repo (tous) + user (tous) => Generate token. SAUVEGARDEZ bien votre token sur un fichier txt.</p><h2 id=application-heroku>Application Heroku</h2><p><a rel="noopener noreferrer" target=_blank href=https://github.com/eduardoboucas/staticman title="Télécharger staticman via github">Télécharger staticman via github</a> avec le lien https :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>git</span> <span style=color:#a6e22e>clone</span> <span style=color:#a6e22e>https</span><span style=color:#f92672>:</span><span style=color:#75715e>//github.com/eduardoboucas/staticman.git
</span></code></pre></div><p>Allez dans le dossier staticman.<br>Créez un fichier, nommez-le &ldquo;Procfile&rdquo;, insérez-y &ldquo;npm start&rdquo;.</p><p>Créez une clé RSA :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>openssl</span> <span style=color:#a6e22e>genrsa</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>out</span> <span style=color:#a6e22e>key</span>.<span style=color:#a6e22e>pem</span>
</code></pre></div><p>Créez un fichier, nommez-le &ldquo;config.production.json&rdquo;, insérez-y :</p><ul><li>notes :</li></ul><blockquote><p>votretoken ressemble a celui ci : b81f780f9f5f3be15a5595e618379756344cdsdk2
pour la rsaPrivateKey, collez l&rsquo;intégralité du fichier key.pem</p></blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>{
  <span style=color:#e6db74>&#34;githubToken&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;votretoken&#34;</span>,
  <span style=color:#e6db74>&#34;rsaPrivateKey&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;-----BEGIN RSA PRIVATE KEY\n-----la clé en entier-----\nEND RSA PRIVATE KEY-----&#34;</span>,
  <span style=color:#e6db74>&#34;port&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>8080</span>
}
</code></pre></div><p>(toujours dans le dossier staticman)</p><p>Connectez votre compte heroku avec :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>heroku</span> <span style=color:#a6e22e>login</span>
</code></pre></div><p>Toujours dans le dossier cloné plus haut (staticman), créez une application heroku :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>heroku</span> <span style=color:#a6e22e>create</span> <span style=color:#a6e22e>nomdevotreapplication</span>
</code></pre></div><h3 id=configuration>Configuration</h3><p>(votretoken ressemble a celui ci : b81f780f9f5f3be15a5595e618379756344cdsdk2)</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>heroku</span> <span style=color:#a6e22e>config</span><span style=color:#f92672>:</span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>NODE_ENV</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;production&#34;</span>
<span style=color:#a6e22e>heroku</span> <span style=color:#a6e22e>config</span><span style=color:#f92672>:</span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>GITHUB_TOKEN</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;votretoken&#34;</span>
<span style=color:#a6e22e>heroku</span> <span style=color:#a6e22e>config</span><span style=color:#f92672>:</span><span style=color:#a6e22e>set</span> <span style=color:#a6e22e>RSA_PRIVATE_KEY</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;$(cat ./key.pem)&#34;</span>
</code></pre></div><p>Créez une branche de production :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>git</span> <span style=color:#a6e22e>checkout</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>b</span> <span style=color:#a6e22e>production</span> <span style=color:#ae81ff>55</span><span style=color:#a6e22e>d1430</span>
</code></pre></div><p>Ajoutez dans le fichier .gitignore pour ignorer le fichier configuration:<br>&ldquo;!config.production.json&rdquo;</p><h3 id=déploiement>Déploiement</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++>git add .
git commit <span style=color:#f92672>-</span>m <span style=color:#e6db74>&#34;Set up Staticman v3 for deployment to Heroku&#34;</span>
git push heroku production:master
</code></pre></div><p>Si tout c&rsquo;est bien passé, en se rendant sur <a href=https://nomdevotreapplication.herokuapp.com/>https://nomdevotreapplication.herokuapp.com/</a> vous devez lire :</p><p>Hello from Staticman version 3.0.0!</p><p>Votre app est disponible.</p><h2 id=api-sur-github>API sur github</h2><p>Connectons votre githubBOT avec votre compteGITHUBprincipal.</p><p>Pour cela, depuis le dépôt de votre site, allez dans &ldquo;settings&rdquo; (paramètres de ce dépôt) -> Manage Access -> Invite a colaborator -> yourgithubBOT -> Invite.</p><p>Acceptez l&rsquo;invitation via le mail de votre githubBOT.</p><h2 id=api-ponts-et-config>API ponts et config</h2><p>Depuis le fichier staticman.yml, j&rsquo;ai choisi volontairement de désactiver la modération, mais faites à votre guise.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=color:#f92672>moderation</span>: <span style=color:#66d9ef>true</span>
</code></pre></div><p>Cela va créer une &ldquo;pull request&rdquo; sur votre branche sélectionnée dans staticman.yml.</p><p>A la source (la RACINE) de votre site, créez un fichier &ldquo;staticman.yml&rdquo; , insérez-y <a rel="noopener noreferrer" target=_blank href=https://github.com/subversive-eu/site/blob/master/staticman.yml title="ce qu&amp;rsquo;il y a dans le miens">ce qu’il y a dans le miens</a></p><p>Dans votre fichier config.yml, ajoutez ou complétez :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=color:#f92672>params</span>:
  <span style=color:#f92672>comments</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#f92672>staticman</span>:
    <span style=color:#f92672>api</span>: <span style=color:#e6db74>&#39;https://nomdevotreapp.herokuapp.com/v2/entry/githubprincipal/repositorydusite/master/comments&#39;</span>
</code></pre></div><p>Ajoutez également un dossier <code>/data/ puis /comments/</code> et un fichier .gitkeep.<br>(Cela permet de maintenir le git push avec les dossiers. Essayez sans, les dossiers vides ne suivront pas sur github).</p><p>La variable &ldquo;comments&rdquo; vous permet de désactiver les commentaires depuis le fichier <code>single.html</code>, vous pouvez aussi l&rsquo;utiliser dans les params d&rsquo;un article (ou page : comments: false).</p><h2 id=afficher-et-écrire-des-commentaires-depuis-le-site>Afficher et écrire des commentaires depuis le site</h2><h3 id=default>default</h3><p>Dans <code>layout/_default/single.html</code> insérez :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>{{<span style=color:#f92672>-</span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>and</span> (<span style=color:#960050;background-color:#1e0010>$</span>.<span style=color:#a6e22e>Site</span>.<span style=color:#a6e22e>Params</span>.<span style=color:#a6e22e>comments</span>) (<span style=color:#a6e22e>ne</span> .<span style=color:#a6e22e>Params</span>.<span style=color:#a6e22e>comments</span> <span style=color:#66d9ef>false</span>) }}
{{<span style=color:#f92672>-</span> <span style=color:#a6e22e>partial</span> <span style=color:#e6db74>&#34;comments.html&#34;</span> . }}
{{<span style=color:#f92672>-</span> <span style=color:#a6e22e>end</span> }}
</code></pre></div><p><a rel="noopener noreferrer" target=_blank href=https://github.com/subversive-eu/site/blob/master/themes/PaperMod/layouts/_default/single.html title="fichier single.html">fichier single.html</a>. (cf juste au-dessus pour activer/désactiver)</p><h3 id=html>html</h3><p>Dans <code>layouts/partials/comments.html</code> (créez le fichier si besoin &ldquo;comments.html&rdquo;) insérez-y <a rel="noopener noreferrer" target=_blank href=https://github.com/subversive-eu/site/blob/master/themes/PaperMod/layouts/partials/comments.html title="partials comments.html">partials comments.html</a>.</p><h3 id=javascript>javascript</h3><p>Le javascript est nécessaire dans cette config, à vous de le personnaliser en fonction de vos désirs.</p><p>Pour des soucis de performance, le script se trouve dans le fichier <a rel="noopener noreferrer" target=_blank href=https://github.com/subversive-eu/site/blob/master/themes/PaperMod/assets/js/script.js title=script.js>script.js</a>.</p><blockquote><p>Notes: Dans <a rel="noopener noreferrer" target=_blank href=https://github.com/subversive-eu/site/blob/master/themes/PaperMod/layouts/partials/footer.html title="le partials footer">le partials footer</a>, mettez votre script en bas des pages pour éviter les erreurs.</p></blockquote><h3 id=css>css</h3><p>Pour styliser le formulaire et l&rsquo;affichage avec les boutons c&rsquo;est ici : <a rel="noopener noreferrer" target=_blank href=https://github.com/subversive-eu/site/blob/master/themes/PaperMod/assets/css/an-old-hope.css title="CSS styles">CSS styles</a></p><p>A vous de choisir en fonction de votre architecture css, en fonction du thème choisi.</p><p>Pour styliser le captcha c&rsquo;est plus complexe cherchez <code>// Captcha SETUP Initial</code> dans <a rel="noopener noreferrer" target=_blank href=https://github.com/subversive-eu/site/blob/master/themes/PaperMod/assets/js/script.js title=script.js>script.js</a>.</p><h2 id=protection-contre-le-spam>Protection contre le spam</h2><p>A la recherche de l&rsquo;utilité, de la vie privée et de la performance.<br><a rel="noopener noreferrer" target=_blank href=https://github.com/dessant/buster title="Buster: Captcha Solver for Humans">Buster: Captcha Solver for Humans</a></p><p>Les CAPTCHA diminuent les performances de vos sites web /apps.</p><p>Le REcaptcha favorise a outrance chromium et les comptes google.</p><p>Il faut que la réponse soit sur un serveur distant, sinon le robot (peut) lire la réponse ? En attente de confirmation.</p><p>Inutile si peu de visiteurs, car le spam est un marché, qui va ouvrir un commerce où il n&rsquo;y a personne ?</p><p>J&rsquo;utilise 3 protections (toutes dépassées):</p><ul><li>Pas de javascript = pas de commentaire. Il faut javascript pour afficher les commentaires car il faut cliquer sur le bouton &ldquo;ouvrir espace commentaire&rdquo;.</li><li>Un input caché <code>&lt;input type="hidden" id="youarenotarobot1"></code>, le visiteur(non-robot/humain) ne le voit pas mais le robot oui, si il le remplit alors ce n&rsquo;est pas un humain.</li><li><a rel="noopener noreferrer" target=_blank href=https://github.com/robiveli/js-captcha title="js-captcha de robiveli">js-captcha de robiveli</a>.</li></ul><h3 id=autre-solution>autre solution</h3><p>Posséder un serveur, y ajouter staticman + <a rel="noopener noreferrer" target=_blank href=https://visualcaptcha.net/ title="visual captcha">visual captcha</a>.<br>Vous pouvez également interdire les url dans le contenu des commentaires.</p><h2 id=notes-importantes>Notes importantes</h2><ul><li>Il n&rsquo;y pas de protection contre le spam vraiment active, si jamais lisez l&rsquo;article <a rel="noopener noreferrer" target=_blank href=https://jvblog.net/configuring-staticman-hugo/ title="Tuto en anglais de 2020">Tuto en anglais de 2020</a>.</li><li>Il n&rsquo;y a pas de modération avant affichage.</li><li>Ne pas hésiter à observer <a rel="noopener noreferrer" target=_blank href=https://github.com/subversive-eu/site title="le code source du site">le code source du site</a></li><li>Cette version est très simple, sans réponse entre commentaires, avec trois champs requis seulement.</li><li>Pour observer <a rel="noopener noreferrer" target=_blank href=https://github.com/subversive-eu/site/tree/master/data/comments title="où se stocke un commentaire">où se stocke un commentaire</a>.</li></ul><h2 id=astuce>Astuce</h2><ul><li><p>Je maîtrise mal le vocabulaire git mais avant de push -u vers le dépôt github, pensez à utiliser &ldquo;git pull&rdquo; pour &ldquo;rapatrier&rdquo; les nouveaux commentaires sur votre dépôt local.</p></li><li><p>Dans la version (v3) de staticman, il n&rsquo;y aurait plus besoin du Personal access tokens. Mais je ne sais comment procéder.</p></li></ul><h3 id=problèmes-rencontrés>Problème(s) rencontré(s)</h3><ul><li>L&rsquo;utilisation de <code>{{ $slug := replace $.RelPermalink "/" "-" }}</code> avec <code>name="options[slug]"</code> ne permet l&rsquo;affichage des commentaires sur les articles où les titres ont des accents. Solution trouvée avec <code>{{ replace $.File.Path "/" "-" }}</code>.</li><li>J&rsquo;ai supprimé du script de js-captcha, je ne sais a quoi il sert, il se peut qu&rsquo;il ne fallait pas le faire.</li><li>De même pour staticman, le script ReCaptcha n&rsquo;est pas dispo sur les fichiers de ce site.</li><li>J&rsquo;ai un souci de cache-control depuis que les commentaires sont disponibles [résolus].</li><li>Il faut reconstruire le site pour afficher un commentaire, ce qui peu prendre du temps, surtout si le dino (herokuapp) dort..</li></ul><h2 id=sources>Sources</h2><h3 id=tutos>tutos</h3><p><a rel="noopener noreferrer" target=_blank href=https://www.datascienceblog.net/post/other/staticman_comments/ title="Tuto en anglais de 2018">Tuto en anglais de 2018</a><br><a rel="noopener noreferrer" target=_blank href=https://yasoob.me/posts/running_staticman_on_static_hugo_blog_with_nested_comments/ title="Tuto en anglais de 2019">Tuto en anglais de 2019</a><br><a rel="noopener noreferrer" target=_blank href=https://jvblog.net/configuring-staticman-hugo/ title="Tuto en anglais de 2020">Tuto en anglais de 2020</a><br><a rel="noopener noreferrer" target=_blank href=https://spinningnumbers.org/a/staticman-heroku.html#site-configuration-files title="Tuto en anglais de 2020 2">Tuto en anglais de 2020 2</a></p><h3 id=fichiers>fichiers</h3><p>Ceux au complet dont je me suis servi.</p><p><a rel="noopener noreferrer" target=_blank href=https://gist.github.com/JulioV/8f3bfd3113764fc9c66726a12d651820 title=staticman-js-common.js>staticman-js-common.js</a><br><a rel="noopener noreferrer" target=_blank href=https://gist.github.com/JulioV/5e0297961e4425054ec94c44c880fc70 title=staticman-styles.css>staticman-styles.css</a><br><a rel="noopener noreferrer" target=_blank href=https://gist.github.com/JulioV/c1386fde8920406f3871666bf059d1a3 title=staticman.html>staticman.html</a><br><a rel="noopener noreferrer" target=_blank href=https://github.com/robiveli/js-captcha/blob/master/src/js/index.js title=js-captcha-index.js>js-captcha-index.js</a><br><a rel="noopener noreferrer" target=_blank href=https://github.com/robiveli/js-captcha/blob/master/src/index.html title=js-captcha-index.html>js-captcha-index.html</a></p></div><footer class=post-footer><div class=share-buttons><a title="Partager via Twitter" target=_blank rel="noopener noreferrer" aria-label="share Ecrire des commentaires sur un site statique (hugo) avec staticman et heroku on twitter" href="https://twitter.com/intent/tweet/?text=Ecrire%20des%20commentaires%20sur%20un%20site%20statique%20%28hugo%29%20avec%20staticman%20et%20heroku&url=https%3a%2f%2fsubversive.eu%2farticles%2fecrire-des-commentaires-sur-un-site-statique-hugo-avec-staticman-et-heroku.html&hashtags="><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zm-253.927 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a title="Partager via Linkedin" target=_blank rel="noopener noreferrer" aria-label="share Ecrire des commentaires sur un site statique (hugo) avec staticman et heroku on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fsubversive.eu%2farticles%2fecrire-des-commentaires-sur-un-site-statique-hugo-avec-staticman-et-heroku.html&title=Ecrire%20des%20commentaires%20sur%20un%20site%20statique%20%28hugo%29%20avec%20staticman%20et%20heroku&summary=Ecrire%20des%20commentaires%20sur%20un%20site%20statique%20%28hugo%29%20avec%20staticman%20et%20heroku&source=https%3a%2f%2fsubversive.eu%2farticles%2fecrire-des-commentaires-sur-un-site-statique-hugo-avec-staticman-et-heroku.html"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0v-129.439c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02v-126.056c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768h75.024zm-307.552-334.556c-25.674.0-42.448 16.879-42.448 39.002.0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a title="Partager via reddit" target=_blank rel="noopener noreferrer" aria-label="share Ecrire des commentaires sur un site statique (hugo) avec staticman et heroku on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fsubversive.eu%2farticles%2fecrire-des-commentaires-sur-un-site-statique-hugo-avec-staticman-et-heroku.html&title=Ecrire%20des%20commentaires%20sur%20un%20site%20statique%20%28hugo%29%20avec%20staticman%20et%20heroku"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zm-119.474 108.193c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zm-160.386-29.702c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a title="Partager via Facebook" target=_blank rel="noopener noreferrer" aria-label="share Ecrire des commentaires sur un site statique (hugo) avec staticman et heroku on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fsubversive.eu%2farticles%2fecrire-des-commentaires-sur-un-site-statique-hugo-avec-staticman-et-heroku.html"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978v-192.915h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a title="Partager via Whatsapp" target=_blank rel="noopener noreferrer" aria-label="share Ecrire des commentaires sur un site statique (hugo) avec staticman et heroku on whatsapp" href="https://api.whatsapp.com/send?text=Ecrire%20des%20commentaires%20sur%20un%20site%20statique%20%28hugo%29%20avec%20staticman%20et%20heroku%20-%20https%3a%2f%2fsubversive.eu%2farticles%2fecrire-des-commentaires-sur-un-site-statique-hugo-avec-staticman-et-heroku.html"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23-13.314-11.876-22.304-26.542-24.916-31.026s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a title="Partager vers Telegram" target=_blank rel="noopener noreferrer" aria-label="share Ecrire des commentaires sur un site statique (hugo) avec staticman et heroku on telegram" href="https://telegram.me/share/url?text=Ecrire%20des%20commentaires%20sur%20un%20site%20statique%20%28hugo%29%20avec%20staticman%20et%20heroku&url=https%3a%2f%2fsubversive.eu%2farticles%2fecrire-des-commentaires-sur-un-site-statique-hugo-avec-staticman-et-heroku.html"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47A3.38 3.38.0 0126.49 29.86zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer><div class=classe-commentaire><aside aria-label=note class=note><section id=comment-thankyou style=display:none;margin-left:5px><p class=comment-merci>Merci pour le commentaire ! Il apparaîtra après la construction (quelques secondes).</p></section></aside><button title="Ouvrir espace commentaire" id=staticman-button onclick=showComments()>Espace commentaire</button><noscript><p class=no-script-text>Activez javascript pour lire les commentaires.</p></noscript><section id=staticman-comments class="js-comments staticman-comments"><form class="js-form form" method=post action=https://subversive.herokuapp.com/v2/entry/subversive-eu/site/master/comments><fieldset><input type=hidden name=options[redirect] value=https://subversive.eu/articles/ecrire-des-commentaires-sur-un-site-statique-hugo-avec-staticman-et-heroku.html#comment-thankyou>
<input type=hidden name=options[slug] value=posts-staticman-hugo-heroku.md>
<input type=hidden name=options[parent]>
<label for=fields[name]>Pseudonyme:</label>
<input name=fields[name] id=yourname type=text placeholder="Votre pseudonyme" required>
<label for=fields[comment]>Commentaire:</label>
<textarea name=fields[comment] id=yourcomment placeholder="A quoi pensez vous ?" required></textarea><output id=warningComment>En cliquant sur Envoyer vous acceptez la <a href=https://subversive.eu/chartedepublication.txt>Charte de publication</a></output><input type=hidden id=youarenotarobot1>
<input class=jCaptcha type=text id=youarenotarobot2 placeholder="Tapez le résultat s’il vous plaît">
<button title="Envoyer le commentaire" class=button id=submitButton>Envoyer</button></fieldset></form></section></div></article></main><footer class=footer><span>&copy; 2021 <a title="Retour vers la page d'accueil" href=https://subversive.eu/>Journal Subversif</a></span></footer><button class=top-link id=top-link type=button name="Haut de page"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"/></svg></button>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script><script src=https://subversive.eu/js/script.min.js></script></body></html>